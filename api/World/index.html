<!doctype html>
<html lang="en" dir="ltr" class="plugin-moonwave plugin-id-moonwave" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">World | AlloyECS</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://LithHash.github.io/AlloyECS/api/World"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="World | AlloyECS"><meta data-rh="true" name="description" content="The World is the main container for all ECS data. It manages entities,
components, queries, systems, relationships, and more.

Create a new world using [AlloyECS.createWorld].

## Method Categories

| Category | Methods |
|----------|----------|
| **Entity** | [World:entity], [World:isAlive], [World:destroy], [World:getEntityCount], [World:getEntities], [World:each] |
| **Component** | [World:component], [World:tag], [World:isTag], [World:add], [World:set], [World:get], [World:has], [World:remove] |
| **Query** | [World:query] |
| **System** | [World:addSystem], [World:removeSystem], [World:enableSystem], [World:disableSystem], [World:runSystems], [World:runPhase], [World:step] |
| **Relationship** | [World:relate], [World:unrelate], [World:getRelation], [World:hasRelation], [World:getTargets], [World:getSources] |
| **Prefab** | [World:prefab], [World:spawn] |
| **Event** | [World:onAdd], [World:onRemove], [World:onChange] |
| **Deferred** | [World:defer], [World:deferSpawn], [World:deferDestroy], [World:deferAdd], [World:deferSet], [World:deferRemove], [World:flush], [World:hasPendingCommands] |
| **Reactive** | [World:added], [World:removed], [World:changed], [World:clearChanges] |
| **Persistence** | [World:serialize], [World:deserialize] |

## Example

```lua
local AlloyECS = require(path.to.AlloyECS)
local world = AlloyECS.createWorld()

-- Create components
local Position = world:component()
local Velocity = world:component()

-- Create entities
local entity = world:entity()
world:set(entity, Position, Vector3.new(0, 0, 0))
world:set(entity, Velocity, Vector3.new(1, 0, 0))

-- Query and update
for entityId, pos, vel in world:query(Position, Velocity) do
	world:set(entityId, Position, pos + vel)
end
```"><meta data-rh="true" property="og:description" content="The World is the main container for all ECS data. It manages entities,
components, queries, systems, relationships, and more.

Create a new world using [AlloyECS.createWorld].

## Method Categories

| Category | Methods |
|----------|----------|
| **Entity** | [World:entity], [World:isAlive], [World:destroy], [World:getEntityCount], [World:getEntities], [World:each] |
| **Component** | [World:component], [World:tag], [World:isTag], [World:add], [World:set], [World:get], [World:has], [World:remove] |
| **Query** | [World:query] |
| **System** | [World:addSystem], [World:removeSystem], [World:enableSystem], [World:disableSystem], [World:runSystems], [World:runPhase], [World:step] |
| **Relationship** | [World:relate], [World:unrelate], [World:getRelation], [World:hasRelation], [World:getTargets], [World:getSources] |
| **Prefab** | [World:prefab], [World:spawn] |
| **Event** | [World:onAdd], [World:onRemove], [World:onChange] |
| **Deferred** | [World:defer], [World:deferSpawn], [World:deferDestroy], [World:deferAdd], [World:deferSet], [World:deferRemove], [World:flush], [World:hasPendingCommands] |
| **Reactive** | [World:added], [World:removed], [World:changed], [World:clearChanges] |
| **Persistence** | [World:serialize], [World:deserialize] |

## Example

```lua
local AlloyECS = require(path.to.AlloyECS)
local world = AlloyECS.createWorld()

-- Create components
local Position = world:component()
local Velocity = world:component()

-- Create entities
local entity = world:entity()
world:set(entity, Position, Vector3.new(0, 0, 0))
world:set(entity, Velocity, Vector3.new(1, 0, 0))

-- Query and update
for entityId, pos, vel in world:query(Position, Velocity) do
	world:set(entityId, Position, pos + vel)
end
```"><link data-rh="true" rel="canonical" href="https://LithHash.github.io/AlloyECS/api/World"><link data-rh="true" rel="alternate" href="https://LithHash.github.io/AlloyECS/api/World" hreflang="en"><link data-rh="true" rel="alternate" href="https://LithHash.github.io/AlloyECS/api/World" hreflang="x-default"><link rel="stylesheet" href="/AlloyECS/assets/css/styles.5cbed574.css">
<script src="/AlloyECS/assets/js/runtime~main.5c8c5537.js" defer="defer"></script>
<script src="/AlloyECS/assets/js/main.65601584.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/AlloyECS/"><b class="navbar__title text--truncate">AlloyECS</b></a><a class="navbar__item navbar__link" href="/AlloyECS/docs/intro">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/AlloyECS/api/">API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/LithHash/AlloyECS" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/LithHash/AlloyECS" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docPageContainer_wNNk"><div class="docPage_Dpn1"><div class="docSidebarContainer_o_re"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/AlloyECS/api/AlloyECS">​Alloy​E​C​S</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/AlloyECS/api/World">​World</a></li></ul></nav></div></div><main class="docMainContainer_HJE1"><div class="container padding-vert--lg"><div class="row"><div class="col docItemCol_MU3C"><div class="docItemContainer_Wv98"><article><div class="member_J0w1 markdown"><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_oUs_"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><header><h1 class="docTitle_mZRt" style="text-decoration:none"><span style="display:inline-block">World</span></h1><div class="luaClassTags_EipM"></div><div>
<p>
  The World is the main container for all ECS data. It manages entities,
  components, queries, systems, relationships, and more.
</p>
<p>Create a new world using <a href="/AlloyECS/api/AlloyECS#createWorld">AlloyECS.createWorld</a>.</p>
<h2>Method Categories</h2>
<table>
  <thead>
    <tr>
      <th>Category</th>
      <th>Methods</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Entity</strong></td>
      <td><a href="/AlloyECS/api/World#entity">World:entity</a>, <a href="/AlloyECS/api/World#isAlive">World:isAlive</a>, <a href="/AlloyECS/api/World#destroy">World:destroy</a>, <a href="/AlloyECS/api/World#getEntityCount">World:getEntityCount</a>, <a href="/AlloyECS/api/World#getEntities">World:getEntities</a>, <a href="/AlloyECS/api/World#each">World:each</a></td>
    </tr>
    <tr>
      <td><strong>Component</strong></td>
      <td><a href="/AlloyECS/api/World#component">World:component</a>, <a href="/AlloyECS/api/World#tag">World:tag</a>, <a href="/AlloyECS/api/World#isTag">World:isTag</a>, <a href="/AlloyECS/api/World#add">World:add</a>, <a href="/AlloyECS/api/World#set">World:set</a>, <a href="/AlloyECS/api/World#get">World:get</a>, <a href="/AlloyECS/api/World#has">World:has</a>, <a href="/AlloyECS/api/World#remove">World:remove</a></td>
    </tr>
    <tr>
      <td><strong>Query</strong></td>
      <td><a href="/AlloyECS/api/World#query">World:query</a></td>
    </tr>
    <tr>
      <td><strong>System</strong></td>
      <td><a href="/AlloyECS/api/World#addSystem">World:addSystem</a>, <a href="/AlloyECS/api/World#removeSystem">World:removeSystem</a>, <a href="/AlloyECS/api/World#enableSystem">World:enableSystem</a>, <a href="/AlloyECS/api/World#disableSystem">World:disableSystem</a>, <a href="/AlloyECS/api/World#runSystems">World:runSystems</a>, <a href="/AlloyECS/api/World#runPhase">World:runPhase</a>, <a href="/AlloyECS/api/World#step">World:step</a></td>
    </tr>
    <tr>
      <td><strong>Relationship</strong></td>
      <td><a href="/AlloyECS/api/World#relate">World:relate</a>, <a href="/AlloyECS/api/World#unrelate">World:unrelate</a>, <a href="/AlloyECS/api/World#getRelation">World:getRelation</a>, <a href="/AlloyECS/api/World#hasRelation">World:hasRelation</a>, <a href="/AlloyECS/api/World#getTargets">World:getTargets</a>, <a href="/AlloyECS/api/World#getSources">World:getSources</a></td>
    </tr>
    <tr>
      <td><strong>Prefab</strong></td>
      <td><a href="/AlloyECS/api/World#prefab">World:prefab</a>, <a href="/AlloyECS/api/World#spawn">World:spawn</a></td>
    </tr>
    <tr>
      <td><strong>Event</strong></td>
      <td><a href="/AlloyECS/api/World#onAdd">World:onAdd</a>, <a href="/AlloyECS/api/World#onRemove">World:onRemove</a>, <a href="/AlloyECS/api/World#onChange">World:onChange</a></td>
    </tr>
    <tr>
      <td><strong>Deferred</strong></td>
      <td><a href="/AlloyECS/api/World#defer">World:defer</a>, <a href="/AlloyECS/api/World#deferSpawn">World:deferSpawn</a>, <a href="/AlloyECS/api/World#deferDestroy">World:deferDestroy</a>, <a href="/AlloyECS/api/World#deferAdd">World:deferAdd</a>, <a href="/AlloyECS/api/World#deferSet">World:deferSet</a>, <a href="/AlloyECS/api/World#deferRemove">World:deferRemove</a>, <a href="/AlloyECS/api/World#flush">World:flush</a>, <a href="/AlloyECS/api/World#hasPendingCommands">World:hasPendingCommands</a></td>
    </tr>
    <tr>
      <td><strong>Reactive</strong></td>
      <td><a href="/AlloyECS/api/World#added">World:added</a>, <a href="/AlloyECS/api/World#removed">World:removed</a>, <a href="/AlloyECS/api/World#changed">World:changed</a>, <a href="/AlloyECS/api/World#clearChanges">World:clearChanges</a></td>
    </tr>
    <tr>
      <td><strong>Persistence</strong></td>
      <td><a href="/AlloyECS/api/World#serialize">World:serialize</a>, <a href="/AlloyECS/api/World#deserialize">World:deserialize</a></td>
    </tr>
  </tbody>
</table>
<h2>Example</h2>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> AlloyECS <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span>to<span class="token punctuation">.</span>AlloyECS<span class="token punctuation">)</span>
<span class="token keyword">local</span> world <span class="token operator">=</span> AlloyECS<span class="token punctuation">.</span><span class="token function">createWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">-- Create components</span>
<span class="token keyword">local</span> Position <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">local</span> Velocity <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">-- Create entities</span>
<span class="token keyword">local</span> entity <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">entity</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
world<span class="token punctuation">:</span><span class="token function">set</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> Position<span class="token punctuation">,</span> Vector3<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
world<span class="token punctuation">:</span><span class="token function">set</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> Velocity<span class="token punctuation">,</span> Vector3<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">-- Query and update</span>
<span class="token keyword">for</span> entityId<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> vel <span class="token keyword">in</span> world<span class="token punctuation">:</span><span class="token function">query</span><span class="token punctuation">(</span>Position<span class="token punctuation">,</span> Velocity<span class="token punctuation">)</span> <span class="token keyword">do</span>
	world<span class="token punctuation">:</span><span class="token function">set</span><span class="token punctuation">(</span>entityId<span class="token punctuation">,</span> Position<span class="token punctuation">,</span> pos <span class="token operator">+</span> vel<span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre>
</div></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="functions">Functions<a href="#functions" class="hash-link" aria-label="Direct link to Functions" title="Direct link to Functions">​</a></h2><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="entity"><code style="text-decoration:none">entity</code><a href="#entity" class="hash-link" aria-label="Direct link to entity" title="Direct link to entity">​</a></h3><span class="docTag__6UZ" style="border-color:#70cc00;color:#70cc00">Entity</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L352"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">entity</code><code>(</code><code>) → </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The new entity ID</p>
</span></span></div><div>
<p>
  Creates a new entity and returns its ID.
  Entity IDs are recycled with incremented generations when entities are destroyed.
</p>

  
    
    
      <div class="admonition admonition-info alert alert--info">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16">
                <path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path>
              </svg></span><span class="admonition-title">Entity IDs</span></h5>
        </div>
        <div class="admonition-content">
          <p>
            Entity IDs encode both an index (24 bits) and a generation (8 bits).
            Use <a href="/AlloyECS/api/AlloyECS#decodeEntityIndex">AlloyECS.decodeEntityIndex</a> and <a href="/AlloyECS/api/AlloyECS#decodeEntityGeneration">AlloyECS.decodeEntityGeneration</a> to extract these values.
          </p>
        </div>
      </div>
    
  

<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> entity <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">entity</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
world<span class="token punctuation">:</span><span class="token function">set</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> Position<span class="token punctuation">,</span> Vector3<span class="token punctuation">.</span>zero<span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="isAlive"><code style="text-decoration:none">isAlive</code><a href="#isAlive" class="hash-link" aria-label="Direct link to isAlive" title="Direct link to isAlive">​</a></h3><span class="docTag__6UZ" style="border-color:#70cc00;color:#70cc00">Entity</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L402"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">isAlive</code><code>(</code><div class="inset_uKQm"><div><code>entityId<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The entity ID to check</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS">boolean</code><span class="inlineDescription_G7Er">-- <span>
<p>True if the entity exists and is alive</p>
</span></span></div><div>
<p>Checks if an entity is currently alive in the world.</p>

  
    
    
      <div class="admonition admonition-warning alert alert--warning">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                <path d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path>
              </svg></span><span class="admonition-title">Stale Entity IDs</span></h5>
        </div>
        <div class="admonition-content">
          <p>
            Always check <code>isAlive</code> before using a stored entity ID, as the entity may have been destroyed
            and its ID recycled.
          </p>
        </div>
      </div>
    
  

<pre class="language-lua"><code class="language-lua"><span class="token keyword">if</span> world<span class="token punctuation">:</span><span class="token function">isAlive</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span> <span class="token keyword">then</span>
	<span class="token comment">-- Safe to use entity</span>
	<span class="token keyword">local</span> pos <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> Position<span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="destroy"><code style="text-decoration:none">destroy</code><a href="#destroy" class="hash-link" aria-label="Direct link to destroy" title="Direct link to destroy">​</a></h3><span class="docTag__6UZ" style="border-color:#70cc00;color:#70cc00">Entity</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L423"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">destroy</code><code>(</code><div class="inset_uKQm"><div><code>entityId<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The entity ID to destroy</p>
</span></span></div></div><code>) → </code><code>(</code><code>)</code></div><div>
<p>
  Destroys an entity, removing all its components and relationships.
  The entity's index will be recycled with an incremented generation.
</p>
<p>This will trigger <a href="/AlloyECS/api/World#onRemove">World:onRemove</a> hooks for all components on the entity.</p>
<pre class="language-lua"><code class="language-lua">world<span class="token punctuation">:</span><span class="token function">destroy</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="getEntityCount"><code style="text-decoration:none">getEntityCount</code><a href="#getEntityCount" class="hash-link" aria-label="Direct link to getEntityCount" title="Direct link to getEntityCount">​</a></h3><span class="docTag__6UZ" style="border-color:#70cc00;color:#70cc00">Entity</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L490"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">getEntityCount</code><code>(</code><code>) → </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The number of living entities</p>
</span></span></div><div>
<p>Returns the total number of living entities in the world.</p>
<pre class="language-lua"><code class="language-lua"><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Entities:"</span><span class="token punctuation">,</span> world<span class="token punctuation">:</span><span class="token function">getEntityCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="getEntities"><code style="text-decoration:none">getEntities</code><a href="#getEntities" class="hash-link" aria-label="Direct link to getEntities" title="Direct link to getEntities">​</a></h3><span class="docTag__6UZ" style="border-color:#70cc00;color:#70cc00">Entity</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L513"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">getEntities</code><code>(</code><code>) → </code><code class="purple_ieR2">{</code><code class="blue_P4bS">number</code><code class="purple_ieR2">}</code><span class="inlineDescription_G7Er">-- <span>
<p>Array of all living entity IDs</p>
</span></span></div><div>
<p>Returns an array containing all living entity IDs.</p>

  
    
    
      <div class="admonition admonition-success alert alert--success">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16">
                <path d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path>
              </svg></span><span class="admonition-title">Performance</span></h5>
        </div>
        <div class="admonition-content">
          <p>
            For iteration, consider using <a href="/AlloyECS/api/World#each">World:each</a> or <a href="/AlloyECS/api/World#query">World:query</a> instead,
            as they don't create a new array.
          </p>
        </div>
      </div>
    
  

<pre class="language-lua"><code class="language-lua"><span class="token keyword">for</span> _<span class="token punctuation">,</span> entityId <span class="token keyword">in</span> world<span class="token punctuation">:</span><span class="token function">getEntities</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">do</span>
	<span class="token function">print</span><span class="token punctuation">(</span>entityId<span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="component"><code style="text-decoration:none">component</code><a href="#component" class="hash-link" aria-label="Direct link to component" title="Direct link to component">​</a></h3><span class="docTag__6UZ" style="border-color:#ff793f;color:#ff793f">Component</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L546"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">component</code><code>(</code><div class="inset_uKQm"><div><code>config<!-- -->: </code><code class="purple_ieR2">{</code><code>storage<!-- -->: </code><code class="blue_P4bS">&quot;sparse&quot;</code><code class="op_lSLc"> | </code><code class="blue_P4bS">&quot;dense&quot;</code><code class="op_lSLc"> | </code><code class="blue_P4bS">&quot;tag&quot;</code><code class="purple_ieR2">}</code><code class="blue_P4bS">?</code><span class="inlineDescription_G7Er">-- <span>
<p>Optional configuration</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The component ID</p>
</span></span></div><div>
<p>Creates a new component type and returns its ID.</p>
<table>
  <thead>
    <tr>
      <th>Storage Type</th>
      <th>Description</th>
      <th>Use Case</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>"sparse"</code></td>
      <td>Standard component with data (default)</td>
      <td>Most components</td>
    </tr>
    <tr>
      <td><code>"dense"</code></td>
      <td><em>(Coming soon)</em> Optimized for components on most entities</td>
      <td>Components on 50%+ entities</td>
    </tr>
    <tr>
      <td><code>"tag"</code></td>
      <td>No data, just marks entities</td>
      <td>Flags like <code>Player</code>, <code>Enemy</code></td>
    </tr>
  </tbody>
</table>

  
    
    
      <div class="admonition admonition-success alert alert--success">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16">
                <path d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path>
              </svg></span><span class="admonition-title">Tags</span></h5>
        </div>
        <div class="admonition-content">
          <p>For tag components (no data), use <a href="/AlloyECS/api/World#tag">World:tag</a> as a shorthand.</p>
        </div>
      </div>
    
  

<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> Position <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">local</span> Health <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">{</span> storage <span class="token operator">=</span> <span class="token string">"sparse"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">local</span> Visible <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">{</span> storage <span class="token operator">=</span> <span class="token string">"tag"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tag"><code style="text-decoration:none">tag</code><a href="#tag" class="hash-link" aria-label="Direct link to tag" title="Direct link to tag">​</a></h3><span class="docTag__6UZ" style="border-color:#ff793f;color:#ff793f">Component</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L590"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">tag</code><code>(</code><code>) → </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The tag component ID</p>
</span></span></div><div>
<p>
  Creates a new tag component (a component with no data).
  Tags are useful for marking entities without storing any values.
</p>
<p>This is equivalent to <code>world:component({ storage = "tag" })</code>.</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> Player <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">local</span> Enemy <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

world<span class="token punctuation">:</span><span class="token function">add</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> Player<span class="token punctuation">)</span>

<span class="token comment">-- Tags work in queries but return nil for their value</span>
<span class="token keyword">for</span> entityId <span class="token keyword">in</span> world<span class="token punctuation">:</span><span class="token function">query</span><span class="token punctuation">(</span>Player<span class="token punctuation">)</span> <span class="token keyword">do</span>
	<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Found player:"</span><span class="token punctuation">,</span> entityId<span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="isTag"><code style="text-decoration:none">isTag</code><a href="#isTag" class="hash-link" aria-label="Direct link to isTag" title="Direct link to isTag">​</a></h3><span class="docTag__6UZ" style="border-color:#ff793f;color:#ff793f">Component</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L611"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">isTag</code><code>(</code><div class="inset_uKQm"><div><code>componentId<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The component ID to check</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS">boolean</code><span class="inlineDescription_G7Er">-- <span>
<p>True if the component is a tag</p>
</span></span></div><div>
<p>Checks if a component is a tag (has no data).</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">if</span> world<span class="token punctuation">:</span><span class="token function">isTag</span><span class="token punctuation">(</span>componentId<span class="token punctuation">)</span> <span class="token keyword">then</span>
	world<span class="token punctuation">:</span><span class="token function">add</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> componentId<span class="token punctuation">)</span>
<span class="token keyword">else</span>
	world<span class="token punctuation">:</span><span class="token function">set</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> componentId<span class="token punctuation">,</span> defaultValue<span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add"><code style="text-decoration:none">add</code><a href="#add" class="hash-link" aria-label="Direct link to add" title="Direct link to add">​</a></h3><span class="docTag__6UZ" style="border-color:#ff793f;color:#ff793f">Component</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L714"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">add</code><code>(</code><div class="inset_uKQm"><div><code>entityId<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The entity to add the component to</p>
</span></span></div><div><code>componentId<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The component/tag to add</p>
</span></span></div></div><code>) → </code><code>(</code><code>)</code></div><div>
<p>
  Adds a tag or component (with value <code>true</code>) to an entity.
  Use <a href="/AlloyECS/api/World#set">World:set</a> instead if you need to store a specific value.
</p>
<p>Triggers <a href="/AlloyECS/api/World#onAdd">World:onAdd</a> hooks.</p>
<pre class="language-lua"><code class="language-lua">world<span class="token punctuation">:</span><span class="token function">add</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> Player<span class="token punctuation">)</span>
world<span class="token punctuation">:</span><span class="token function">add</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> Visible<span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="set"><code style="text-decoration:none">set</code><a href="#set" class="hash-link" aria-label="Direct link to set" title="Direct link to set">​</a></h3><span class="docTag__6UZ" style="border-color:#ff793f;color:#ff793f">Component</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L760"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">set</code><code>(</code><div class="inset_uKQm"><div><code>entityId<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The entity to set the component on</p>
</span></span></div><div><code>componentId<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The component ID</p>
</span></span></div><div><code>value<!-- -->: </code><code class="blue_P4bS">any</code><span class="inlineDescription_G7Er">-- <span>
<p>The value to store</p>
</span></span></div></div><code>) → </code><code>(</code><code>)</code></div><div>
<p>
  Sets a component value on an entity. If the entity doesn't have the component,
  it will be added.
</p>
<ul>
  <li>Triggers <a href="/AlloyECS/api/World#onAdd">World:onAdd</a> hook if the component is new</li>
  <li>Triggers <a href="/AlloyECS/api/World#onChange">World:onChange</a> hook if updating an existing value</li>
</ul>
<pre class="language-lua"><code class="language-lua">world<span class="token punctuation">:</span><span class="token function">set</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> Position<span class="token punctuation">,</span> Vector3<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
world<span class="token punctuation">:</span><span class="token function">set</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> Health<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="get"><code style="text-decoration:none">get</code><a href="#get" class="hash-link" aria-label="Direct link to get" title="Direct link to get">​</a></h3><span class="docTag__6UZ" style="border-color:#ff793f;color:#ff793f">Component</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L819"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">get</code><code>(</code><div class="inset_uKQm"><div><code>entityId<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The entity to get the component from</p>
</span></span></div><div><code>componentId<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The component ID</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS">any</code><span class="inlineDescription_G7Er">-- <span>
<p>The component value, or nil if not present</p>
</span></span></div><div>
<p>Gets a component value from an entity. Returns nil for tags or missing components.</p>

  
    
    
      <div class="admonition admonition-info alert alert--info">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16">
                <path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path>
              </svg></span><span class="admonition-title">Tags</span></h5>
        </div>
        <div class="admonition-content">
          <p>For tags, use <a href="/AlloyECS/api/World#has">World:has</a> to check presence since <code>get</code> returns nil.</p>
        </div>
      </div>
    
  

<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> pos <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> Position<span class="token punctuation">)</span>
<span class="token keyword">if</span> pos <span class="token keyword">then</span>
	<span class="token function">print</span><span class="token punctuation">(</span>pos<span class="token punctuation">.</span>X<span class="token punctuation">,</span> pos<span class="token punctuation">.</span>Y<span class="token punctuation">,</span> pos<span class="token punctuation">.</span>Z<span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="has"><code style="text-decoration:none">has</code><a href="#has" class="hash-link" aria-label="Direct link to has" title="Direct link to has">​</a></h3><span class="docTag__6UZ" style="border-color:#ff793f;color:#ff793f">Component</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L860"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">has</code><code>(</code><div class="inset_uKQm"><div><code>entityId<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The entity to check</p>
</span></span></div><div><code>...<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>One or more component IDs</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS">boolean</code><span class="inlineDescription_G7Er">-- <span>
<p>True if the entity has all specified components</p>
</span></span></div><div>
<p>Checks if an entity has one or more components (including tags).</p>
<pre class="language-lua"><code class="language-lua"><span class="token comment">-- Check single component</span>
<span class="token keyword">if</span> world<span class="token punctuation">:</span><span class="token function">has</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> Position<span class="token punctuation">)</span> <span class="token keyword">then</span>
	<span class="token comment">-- ...</span>
<span class="token keyword">end</span>

<span class="token comment">-- Check multiple components</span>
<span class="token keyword">if</span> world<span class="token punctuation">:</span><span class="token function">has</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> Position<span class="token punctuation">,</span> Velocity<span class="token punctuation">)</span> <span class="token keyword">then</span>
	<span class="token comment">-- Entity has both Position and Velocity</span>
<span class="token keyword">end</span>

<span class="token comment">-- Works with tags too</span>
<span class="token keyword">if</span> world<span class="token punctuation">:</span><span class="token function">has</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> Player<span class="token punctuation">)</span> <span class="token keyword">then</span>
	<span class="token comment">-- Entity is a player</span>
<span class="token keyword">end</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="remove"><code style="text-decoration:none">remove</code><a href="#remove" class="hash-link" aria-label="Direct link to remove" title="Direct link to remove">​</a></h3><span class="docTag__6UZ" style="border-color:#ff793f;color:#ff793f">Component</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L898"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">remove</code><code>(</code><div class="inset_uKQm"><div><code>entityId<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The entity to remove the component from</p>
</span></span></div><div><code>componentId<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The component ID to remove</p>
</span></span></div></div><code>) → </code><code>(</code><code>)</code></div><div>
<p>Removes a component from an entity.</p>
<p>Triggers <a href="/AlloyECS/api/World#onRemove">World:onRemove</a> hook with the old value.</p>
<pre class="language-lua"><code class="language-lua">world<span class="token punctuation">:</span><span class="token function">remove</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> Velocity<span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="query"><code style="text-decoration:none">query</code><a href="#query" class="hash-link" aria-label="Direct link to query" title="Direct link to query">​</a></h3><span class="docTag__6UZ" style="border-color:#2b8ab6;color:#2b8ab6">Query</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1186"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">query</code><code>(</code><div class="inset_uKQm"><div><code>...<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>Component IDs to query for</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/AlloyECS/api/AlloyECS#QueryBuilder">QueryBuilder</a></code><span class="inlineDescription_G7Er">-- <span>
<p>A query object that can be iterated directly or filtered with <code>:with()</code> / <code>:without()</code></p>
</span></span></div><div>
<p>
  Queries for entities that have all specified components.
  Returns a query object that yields the entity ID followed by component values.
</p>
<pre class="language-lua"><code class="language-lua"><span class="token comment">-- Simple query (direct iteration)</span>
<span class="token keyword">for</span> entityId<span class="token punctuation">,</span> position <span class="token keyword">in</span> world<span class="token punctuation">:</span><span class="token function">query</span><span class="token punctuation">(</span>Position<span class="token punctuation">)</span> <span class="token keyword">do</span>
	<span class="token function">print</span><span class="token punctuation">(</span>entityId<span class="token punctuation">,</span> position<span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token comment">-- Multiple components</span>
<span class="token keyword">for</span> entityId<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> vel <span class="token keyword">in</span> world<span class="token punctuation">:</span><span class="token function">query</span><span class="token punctuation">(</span>Position<span class="token punctuation">,</span> Velocity<span class="token punctuation">)</span> <span class="token keyword">do</span>
	world<span class="token punctuation">:</span><span class="token function">set</span><span class="token punctuation">(</span>entityId<span class="token punctuation">,</span> Position<span class="token punctuation">,</span> pos <span class="token operator">+</span> vel <span class="token operator">*</span> deltaTime<span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token comment">-- With filters (call :iter() after filters)</span>
<span class="token keyword">for</span> entityId<span class="token punctuation">,</span> pos <span class="token keyword">in</span> world<span class="token punctuation">:</span><span class="token function">query</span><span class="token punctuation">(</span>Position<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">with</span><span class="token punctuation">(</span>Player<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">without</span><span class="token punctuation">(</span>Dead<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">do</span>
	<span class="token comment">-- Only living players with Position</span>
<span class="token keyword">end</span>
</code></pre>

  
    
    
      <div class="admonition admonition-success alert alert--success">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16">
                <path d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path>
              </svg></span><span class="admonition-title">Query Caching</span></h5>
        </div>
        <div class="admonition-content">
          <p>
            Queries are cached for performance. The cache is automatically
            invalidated when entities or components change.
          </p>
        </div>
      </div>
    
  


  
    
    
      <div class="admonition admonition-info alert alert--info">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16">
                <path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path>
              </svg></span><span class="admonition-title">Filter Methods</span></h5>
        </div>
        <div class="admonition-content">
          <p>The query result supports chainable filter methods:</p>
          <ul>
            <li><code>:with(...)</code> - Require components without returning their values</li>
            <li><code>:without(...)</code> - Exclude entities with these components</li>
            <li><code>:iter()</code> - Execute the filtered query (required when using filters)</li>
          </ul>
        </div>
      </div>
    
  

</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="queryBuilder"><code style="text-decoration:none">queryBuilder</code><a href="#queryBuilder" class="hash-link" aria-label="Direct link to queryBuilder" title="Direct link to queryBuilder">​</a></h3><span class="docTag__6UZ" style="border-color:#2b8ab6;color:#2b8ab6">Query</span><span class="docTag__6UZ" style="border-color:#70cc00;color:#70cc00">Advanced</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1224"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">queryBuilder</code><code>(</code><div class="inset_uKQm"><div><code>...<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>Component IDs to query for (values will be returned)</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/AlloyECS/api/AlloyECS#QueryBuilder">QueryBuilder</a></code><span class="inlineDescription_G7Er">-- <span>
<p>A query builder for adding filters</p>
</span></span></div><div>
<p>Creates a query builder for more complex queries with filters.</p>

  
    
    
      <div class="admonition admonition-success alert alert--success">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16">
                <path d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path>
              </svg></span><span class="admonition-title">Use query() Instead</span></h5>
        </div>
        <div class="admonition-content">
          <p>
            <a href="/AlloyECS/api/World#query">World:query</a> now supports the same <code>:with()</code> and <code>:without()</code> modifiers.
            This method is provided for backwards compatibility.
          </p>
        </div>
      </div>
    
  

<pre class="language-lua"><code class="language-lua"><span class="token comment">-- Preferred: use query() directly</span>
<span class="token keyword">for</span> entityId<span class="token punctuation">,</span> pos <span class="token keyword">in</span> world<span class="token punctuation">:</span><span class="token function">query</span><span class="token punctuation">(</span>Position<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">with</span><span class="token punctuation">(</span>Player<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">without</span><span class="token punctuation">(</span>Dead<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">do</span>
	<span class="token comment">-- pos is returned, Player is required but not returned</span>
<span class="token keyword">end</span>

<span class="token comment">-- Also works: explicit queryBuilder</span>
<span class="token keyword">for</span> entityId<span class="token punctuation">,</span> pos <span class="token keyword">in</span> world<span class="token punctuation">:</span><span class="token function">queryBuilder</span><span class="token punctuation">(</span>Position<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">with</span><span class="token punctuation">(</span>Player<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">without</span><span class="token punctuation">(</span>Dead<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">do</span>
	<span class="token comment">-- Same result</span>
<span class="token keyword">end</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="added"><code style="text-decoration:none">added</code><a href="#added" class="hash-link" aria-label="Direct link to added" title="Direct link to added">​</a></h3><span class="docTag__6UZ" style="border-color:#dc0073;color:#dc0073">Reactive</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1372"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">added</code><code>(</code><div class="inset_uKQm"><div><code>componentId<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The component ID to check</p>
</span></span></div></div><code>) → </code><code class="purple_ieR2">{</code><code class="blue_P4bS">number</code><code class="purple_ieR2">}</code><span class="inlineDescription_G7Er">-- <span>
<p>Array of entity IDs that had this component added</p>
</span></span></div><div>
<p>Returns entities that had the specified component added this frame.</p>

  
    
    
      <div class="admonition admonition-warning alert alert--warning">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                <path d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path>
              </svg></span><span class="admonition-title">Requires Change Tracking</span></h5>
        </div>
        <div class="admonition-content">
          <p>This method requires <code>trackChanges = true</code> in <a href="/AlloyECS/api/AlloyECS#createWorld">AlloyECS.createWorld</a> config.</p>
        </div>
      </div>
    
  

<pre class="language-lua"><code class="language-lua"><span class="token keyword">for</span> _<span class="token punctuation">,</span> entityId <span class="token keyword">in</span> world<span class="token punctuation">:</span><span class="token function">added</span><span class="token punctuation">(</span>Position<span class="token punctuation">)</span> <span class="token keyword">do</span>
	<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Entity gained Position:"</span><span class="token punctuation">,</span> entityId<span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="removed"><code style="text-decoration:none">removed</code><a href="#removed" class="hash-link" aria-label="Direct link to removed" title="Direct link to removed">​</a></h3><span class="docTag__6UZ" style="border-color:#dc0073;color:#dc0073">Reactive</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1399"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">removed</code><code>(</code><div class="inset_uKQm"><div><code>componentId<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The component ID to check</p>
</span></span></div></div><code>) → </code><code class="purple_ieR2">{</code><code class="blue_P4bS">number</code><code class="purple_ieR2">}</code><span class="inlineDescription_G7Er">-- <span>
<p>Array of entity IDs that had this component removed</p>
</span></span></div><div>
<p>Returns entities that had the specified component removed this frame.</p>

  
    
    
      <div class="admonition admonition-warning alert alert--warning">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                <path d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path>
              </svg></span><span class="admonition-title">Requires Change Tracking</span></h5>
        </div>
        <div class="admonition-content">
          <p>This method requires <code>trackChanges = true</code> in <a href="/AlloyECS/api/AlloyECS#createWorld">AlloyECS.createWorld</a> config.</p>
        </div>
      </div>
    
  

<pre class="language-lua"><code class="language-lua"><span class="token keyword">for</span> _<span class="token punctuation">,</span> entityId <span class="token keyword">in</span> world<span class="token punctuation">:</span><span class="token function">removed</span><span class="token punctuation">(</span>Health<span class="token punctuation">)</span> <span class="token keyword">do</span>
	<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Entity lost Health:"</span><span class="token punctuation">,</span> entityId<span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changed"><code style="text-decoration:none">changed</code><a href="#changed" class="hash-link" aria-label="Direct link to changed" title="Direct link to changed">​</a></h3><span class="docTag__6UZ" style="border-color:#dc0073;color:#dc0073">Reactive</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1426"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">changed</code><code>(</code><div class="inset_uKQm"><div><code>componentId<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The component ID to check</p>
</span></span></div></div><code>) → </code><code class="purple_ieR2">{</code><code class="blue_P4bS">number</code><code class="purple_ieR2">}</code><span class="inlineDescription_G7Er">-- <span>
<p>Array of entity IDs that had this component changed</p>
</span></span></div><div>
<p>Returns entities that had the specified component value changed this frame.</p>

  
    
    
      <div class="admonition admonition-warning alert alert--warning">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                <path d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path>
              </svg></span><span class="admonition-title">Requires Change Tracking</span></h5>
        </div>
        <div class="admonition-content">
          <p>This method requires <code>trackChanges = true</code> in <a href="/AlloyECS/api/AlloyECS#createWorld">AlloyECS.createWorld</a> config.</p>
        </div>
      </div>
    
  

<pre class="language-lua"><code class="language-lua"><span class="token keyword">for</span> _<span class="token punctuation">,</span> entityId <span class="token keyword">in</span> world<span class="token punctuation">:</span><span class="token function">changed</span><span class="token punctuation">(</span>Position<span class="token punctuation">)</span> <span class="token keyword">do</span>
	<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Entity moved:"</span><span class="token punctuation">,</span> entityId<span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="clearChanges"><code style="text-decoration:none">clearChanges</code><a href="#clearChanges" class="hash-link" aria-label="Direct link to clearChanges" title="Direct link to clearChanges">​</a></h3><span class="docTag__6UZ" style="border-color:#dc0073;color:#dc0073">Reactive</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1457"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">clearChanges</code><code>(</code><code>) → </code><code>(</code><code>)</code></div><div>
<p>
  Clears all tracked changes for the current frame.
  Call this at the end of each frame after processing changes.
</p>

  
    
    
      <div class="admonition admonition-success alert alert--success">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16">
                <path d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path>
              </svg></span><span class="admonition-title">Automatic Clearing</span></h5>
        </div>
        <div class="admonition-content">
          <p>
            <a href="/AlloyECS/api/World#step">World:step</a> calls this automatically. Only call manually if you're
            not using <code>step()</code>.
          </p>
        </div>
      </div>
    
  

<pre class="language-lua"><code class="language-lua"><span class="token comment">-- Process changes</span>
<span class="token keyword">for</span> _<span class="token punctuation">,</span> entityId <span class="token keyword">in</span> world<span class="token punctuation">:</span><span class="token function">added</span><span class="token punctuation">(</span>Position<span class="token punctuation">)</span> <span class="token keyword">do</span>
	<span class="token comment">-- Handle new positions</span>
<span class="token keyword">end</span>

<span class="token comment">-- Clear for next frame</span>
world<span class="token punctuation">:</span><span class="token function">clearChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="defer"><code style="text-decoration:none">defer</code><a href="#defer" class="hash-link" aria-label="Direct link to defer" title="Direct link to defer">​</a></h3><span class="docTag__6UZ" style="border-color:#dc0073;color:#dc0073">Deferred</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1478"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">defer</code><code>(</code><code>) → </code><code>(</code><code>)</code></div><div>
<p>
  Enables deferred mode. In deferred mode, use the <code>defer*</code> methods
  to queue operations that will be executed when <a href="/AlloyECS/api/World#flush">World:flush</a> is called.
</p>

  
    
    
      <div class="admonition admonition-info alert alert--info">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16">
                <path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path>
              </svg></span><span class="admonition-title">Use Case</span></h5>
        </div>
        <div class="admonition-content">
          <p>
            Deferred operations are useful during iteration when you can't safely
            modify entities being queried.
          </p>
        </div>
      </div>
    
  

</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deferSpawn"><code style="text-decoration:none">deferSpawn</code><a href="#deferSpawn" class="hash-link" aria-label="Direct link to deferSpawn" title="Direct link to deferSpawn">​</a></h3><span class="docTag__6UZ" style="border-color:#dc0073;color:#dc0073">Deferred</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1497"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">deferSpawn</code><code>(</code><div class="inset_uKQm"><div><code>callback<!-- -->: </code><code class="purple_ieR2">(</code><code class="green_DgR4">(</code><code>entityId<!-- -->: </code><code class="blue_P4bS">number</code><code class="green_DgR4">)</code><code class="green_DgR4"> → </code><code class="green_DgR4">(</code><code class="green_DgR4">)</code><code class="purple_ieR2">)</code><code class="blue_P4bS">?</code><span class="inlineDescription_G7Er">-- <span>
<p>Optional callback with the new entity ID</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/AlloyECS/api/World">World</a></code><span class="inlineDescription_G7Er">-- <span>
<p>Returns self for chaining</p>
</span></span></div><div>
<p>Queues an entity spawn operation. The callback receives the entity ID when flushed.</p>
<pre class="language-lua"><code class="language-lua">world<span class="token punctuation">:</span><span class="token function">deferSpawn</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>entityId<span class="token punctuation">)</span>
	world<span class="token punctuation">:</span><span class="token function">deferSet</span><span class="token punctuation">(</span>entityId<span class="token punctuation">,</span> Position<span class="token punctuation">,</span> Vector3<span class="token punctuation">.</span>zero<span class="token punctuation">)</span>
<span class="token keyword">end</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deferDestroy"><code style="text-decoration:none">deferDestroy</code><a href="#deferDestroy" class="hash-link" aria-label="Direct link to deferDestroy" title="Direct link to deferDestroy">​</a></h3><span class="docTag__6UZ" style="border-color:#dc0073;color:#dc0073">Deferred</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1520"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">deferDestroy</code><code>(</code><div class="inset_uKQm"><div><code>entityId<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The entity to destroy</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/AlloyECS/api/World">World</a></code><span class="inlineDescription_G7Er">-- <span>
<p>Returns self for chaining</p>
</span></span></div><div>
<p>Queues an entity destroy operation.</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">for</span> entityId<span class="token punctuation">,</span> health <span class="token keyword">in</span> world<span class="token punctuation">:</span><span class="token function">query</span><span class="token punctuation">(</span>Health<span class="token punctuation">)</span> <span class="token keyword">do</span>
	<span class="token keyword">if</span> health <span class="token operator">&#x3C;=</span> <span class="token number">0</span> <span class="token keyword">then</span>
		world<span class="token punctuation">:</span><span class="token function">deferDestroy</span><span class="token punctuation">(</span>entityId<span class="token punctuation">)</span>
	<span class="token keyword">end</span>
<span class="token keyword">end</span>
world<span class="token punctuation">:</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deferAdd"><code style="text-decoration:none">deferAdd</code><a href="#deferAdd" class="hash-link" aria-label="Direct link to deferAdd" title="Direct link to deferAdd">​</a></h3><span class="docTag__6UZ" style="border-color:#dc0073;color:#dc0073">Deferred</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1539"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">deferAdd</code><code>(</code><div class="inset_uKQm"><div><code>entityId<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The entity to add the component to</p>
</span></span></div><div><code>componentId<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The component to add</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/AlloyECS/api/World">World</a></code><span class="inlineDescription_G7Er">-- <span>
<p>Returns self for chaining</p>
</span></span></div><div>
<p>Queues a component add operation.</p>
<pre class="language-lua"><code class="language-lua">world<span class="token punctuation">:</span><span class="token function">deferAdd</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> Player<span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deferSet"><code style="text-decoration:none">deferSet</code><a href="#deferSet" class="hash-link" aria-label="Direct link to deferSet" title="Direct link to deferSet">​</a></h3><span class="docTag__6UZ" style="border-color:#dc0073;color:#dc0073">Deferred</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1559"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">deferSet</code><code>(</code><div class="inset_uKQm"><div><code>entityId<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The entity to set the component on</p>
</span></span></div><div><code>componentId<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The component ID</p>
</span></span></div><div><code>value<!-- -->: </code><code class="blue_P4bS">any</code><span class="inlineDescription_G7Er">-- <span>
<p>The value to set</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/AlloyECS/api/World">World</a></code><span class="inlineDescription_G7Er">-- <span>
<p>Returns self for chaining</p>
</span></span></div><div>
<p>Queues a component set operation.</p>
<pre class="language-lua"><code class="language-lua">world<span class="token punctuation">:</span><span class="token function">deferSet</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> Position<span class="token punctuation">,</span> newPosition<span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deferRemove"><code style="text-decoration:none">deferRemove</code><a href="#deferRemove" class="hash-link" aria-label="Direct link to deferRemove" title="Direct link to deferRemove">​</a></h3><span class="docTag__6UZ" style="border-color:#dc0073;color:#dc0073">Deferred</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1578"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">deferRemove</code><code>(</code><div class="inset_uKQm"><div><code>entityId<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The entity to remove the component from</p>
</span></span></div><div><code>componentId<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The component to remove</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/AlloyECS/api/World">World</a></code><span class="inlineDescription_G7Er">-- <span>
<p>Returns self for chaining</p>
</span></span></div><div>
<p>Queues a component remove operation.</p>
<pre class="language-lua"><code class="language-lua">world<span class="token punctuation">:</span><span class="token function">deferRemove</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> Velocity<span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="flush"><code style="text-decoration:none">flush</code><a href="#flush" class="hash-link" aria-label="Direct link to flush" title="Direct link to flush">​</a></h3><span class="docTag__6UZ" style="border-color:#dc0073;color:#dc0073">Deferred</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1602"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">flush</code><code>(</code><code>) → </code><code>(</code><code>)</code></div><div>
<p>Executes all queued deferred operations and exits deferred mode.</p>

  
    
    
      <div class="admonition admonition-success alert alert--success">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16">
                <path d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path>
              </svg></span><span class="admonition-title">Automatic Flushing</span></h5>
        </div>
        <div class="admonition-content">
          <p>
            <a href="/AlloyECS/api/World#step">World:step</a> calls flush automatically. Only call manually if you're
            not using <code>step()</code>.
          </p>
        </div>
      </div>
    
  

<pre class="language-lua"><code class="language-lua">world<span class="token punctuation">:</span><span class="token function">defer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
world<span class="token punctuation">:</span><span class="token function">deferSpawn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
world<span class="token punctuation">:</span><span class="token function">deferSet</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> Position<span class="token punctuation">,</span> pos<span class="token punctuation">)</span>
world<span class="token punctuation">:</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">-- All operations execute here</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hasPendingCommands"><code style="text-decoration:none">hasPendingCommands</code><a href="#hasPendingCommands" class="hash-link" aria-label="Direct link to hasPendingCommands" title="Direct link to hasPendingCommands">​</a></h3><span class="docTag__6UZ" style="border-color:#dc0073;color:#dc0073">Deferred</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1638"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">hasPendingCommands</code><code>(</code><code>) → </code><code class="blue_P4bS">boolean</code><span class="inlineDescription_G7Er">-- <span>
<p>True if there are pending deferred commands</p>
</span></span></div><div>
<p>Checks if there are any pending deferred commands to execute.</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">if</span> world<span class="token punctuation">:</span><span class="token function">hasPendingCommands</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">then</span>
	world<span class="token punctuation">:</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="addSystem"><code style="text-decoration:none">addSystem</code><a href="#addSystem" class="hash-link" aria-label="Direct link to addSystem" title="Direct link to addSystem">​</a></h3><span class="docTag__6UZ" style="border-color:#79b473;color:#79b473">System</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1674"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">addSystem</code><code>(</code><div class="inset_uKQm"><div><code>name<!-- -->: </code><code class="blue_P4bS">string</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>Unique name for the system</p>
</span></span></div><div><code>phase<!-- -->: </code><code class="blue_P4bS">&quot;PreUpdate&quot;</code><code class="op_lSLc"> | </code><code class="blue_P4bS">&quot;Update&quot;</code><code class="op_lSLc"> | </code><code class="blue_P4bS">&quot;PostUpdate&quot;</code><code class="op_lSLc"> | </code><code class="blue_P4bS">&quot;PreRender&quot;</code><code class="op_lSLc"> | </code><code class="blue_P4bS">&quot;Render&quot;</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>Execution phase</p>
</span></span></div><div><code>dependencies<!-- -->: </code><code class="purple_ieR2">{</code><div class="inset_uKQm"><code>reads<!-- -->: </code><code class="green_DgR4">{</code><code class="blue_P4bS">number</code><code class="green_DgR4">}</code><code class="blue_P4bS">?</code><code class="purple_ieR2">,</code></div><div class="inset_uKQm"><code>writes<!-- -->: </code><code class="green_DgR4">{</code><code class="blue_P4bS">number</code><code class="green_DgR4">}</code><code class="blue_P4bS">?</code></div><code class="purple_ieR2">}</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>Component dependencies</p>
</span></span></div><div><code>callback<!-- -->: </code><code class="purple_ieR2">(</code><code>deltaTime<!-- -->: </code><code class="blue_P4bS">number</code><code class="purple_ieR2">)</code><code class="purple_ieR2"> → </code><code class="purple_ieR2">(</code><code class="purple_ieR2">)</code><span class="inlineDescription_G7Er">-- <span>
<p>System function</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS">System</code><span class="inlineDescription_G7Er">-- <span>
<p>The created system</p>
</span></span></div><div>
<p>
  Adds a system to the scheduler. Systems are batched by phase and can run
  in parallel if they don't have conflicting dependencies.
</p>
<table>
  <thead>
    <tr>
      <th>Phase</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>"PreUpdate"</code></td>
      <td>Before main update logic</td>
    </tr>
    <tr>
      <td><code>"Update"</code></td>
      <td>Main game logic</td>
    </tr>
    <tr>
      <td><code>"PostUpdate"</code></td>
      <td>After main update logic</td>
    </tr>
    <tr>
      <td><code>"PreRender"</code></td>
      <td>Before rendering</td>
    </tr>
    <tr>
      <td><code>"Render"</code></td>
      <td>Rendering logic</td>
    </tr>
  </tbody>
</table>
<pre class="language-lua"><code class="language-lua">world<span class="token punctuation">:</span><span class="token function">addSystem</span><span class="token punctuation">(</span><span class="token string">"Movement"</span><span class="token punctuation">,</span> <span class="token string">"Update"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	reads <span class="token operator">=</span> <span class="token punctuation">{</span> Position<span class="token punctuation">,</span> Velocity <span class="token punctuation">}</span><span class="token punctuation">,</span>
	writes <span class="token operator">=</span> <span class="token punctuation">{</span> Position <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>dt<span class="token punctuation">)</span>
	<span class="token keyword">for</span> entityId<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> vel <span class="token keyword">in</span> world<span class="token punctuation">:</span><span class="token function">query</span><span class="token punctuation">(</span>Position<span class="token punctuation">,</span> Velocity<span class="token punctuation">)</span> <span class="token keyword">do</span>
		world<span class="token punctuation">:</span><span class="token function">set</span><span class="token punctuation">(</span>entityId<span class="token punctuation">,</span> Position<span class="token punctuation">,</span> pos <span class="token operator">+</span> vel <span class="token operator">*</span> dt<span class="token punctuation">)</span>
	<span class="token keyword">end</span>
<span class="token keyword">end</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="removeSystem"><code style="text-decoration:none">removeSystem</code><a href="#removeSystem" class="hash-link" aria-label="Direct link to removeSystem" title="Direct link to removeSystem">​</a></h3><span class="docTag__6UZ" style="border-color:#79b473;color:#79b473">System</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1697"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">removeSystem</code><code>(</code><div class="inset_uKQm"><div><code>name<!-- -->: </code><code class="blue_P4bS">string</code><span class="inlineDescription_G7Er">-- <span>
<p>The name of the system to remove</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS">boolean</code><span class="inlineDescription_G7Er">-- <span>
<p>True if the system was found and removed</p>
</span></span></div><div>
<p>Removes a system from the scheduler.</p>
<pre class="language-lua"><code class="language-lua">world<span class="token punctuation">:</span><span class="token function">removeSystem</span><span class="token punctuation">(</span><span class="token string">"Movement"</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="enableSystem"><code style="text-decoration:none">enableSystem</code><a href="#enableSystem" class="hash-link" aria-label="Direct link to enableSystem" title="Direct link to enableSystem">​</a></h3><span class="docTag__6UZ" style="border-color:#79b473;color:#79b473">System</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1714"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">enableSystem</code><code>(</code><div class="inset_uKQm"><div><code>name<!-- -->: </code><code class="blue_P4bS">string</code><span class="inlineDescription_G7Er">-- <span>
<p>The name of the system to enable</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS">boolean</code><span class="inlineDescription_G7Er">-- <span>
<p>True if the system was found and enabled</p>
</span></span></div><div>
<p>Enables a previously disabled system.</p>
<pre class="language-lua"><code class="language-lua">world<span class="token punctuation">:</span><span class="token function">enableSystem</span><span class="token punctuation">(</span><span class="token string">"AI"</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="disableSystem"><code style="text-decoration:none">disableSystem</code><a href="#disableSystem" class="hash-link" aria-label="Direct link to disableSystem" title="Direct link to disableSystem">​</a></h3><span class="docTag__6UZ" style="border-color:#79b473;color:#79b473">System</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1735"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">disableSystem</code><code>(</code><div class="inset_uKQm"><div><code>name<!-- -->: </code><code class="blue_P4bS">string</code><span class="inlineDescription_G7Er">-- <span>
<p>The name of the system to disable</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS">boolean</code><span class="inlineDescription_G7Er">-- <span>
<p>True if the system was found and disabled</p>
</span></span></div><div>
<p>Disables a system without removing it. Disabled systems won't run.</p>

  
    
    
      <div class="admonition admonition-success alert alert--success">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16">
                <path d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path>
              </svg></span><span class="admonition-title">Use Case</span></h5>
        </div>
        <div class="admonition-content">
          <p>Useful for pausing specific systems, e.g., disabling AI during cutscenes.</p>
        </div>
      </div>
    
  

<pre class="language-lua"><code class="language-lua">world<span class="token punctuation">:</span><span class="token function">disableSystem</span><span class="token punctuation">(</span><span class="token string">"AI"</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="runSystems"><code style="text-decoration:none">runSystems</code><a href="#runSystems" class="hash-link" aria-label="Direct link to runSystems" title="Direct link to runSystems">​</a></h3><span class="docTag__6UZ" style="border-color:#79b473;color:#79b473">System</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1752"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">runSystems</code><code>(</code><div class="inset_uKQm"><div><code>deltaTime<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>Time since last frame</p>
</span></span></div></div><code>) → </code><code>(</code><code>)</code></div><div>
<p>Runs all enabled systems in all phases.</p>

  
    
    
      <div class="admonition admonition-success alert alert--success">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16">
                <path d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path>
              </svg></span><span class="admonition-title">Use step() Instead</span></h5>
        </div>
        <div class="admonition-content">
          <p>
            <a href="/AlloyECS/api/World#step">World:step</a> handles flushing, running systems, and clearing changes.
            Use this only if you need manual control.
          </p>
        </div>
      </div>
    
  

</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="runPhase"><code style="text-decoration:none">runPhase</code><a href="#runPhase" class="hash-link" aria-label="Direct link to runPhase" title="Direct link to runPhase">​</a></h3><span class="docTag__6UZ" style="border-color:#79b473;color:#79b473">System</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1770"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">runPhase</code><code>(</code><div class="inset_uKQm"><div><code>phase<!-- -->: </code><code class="blue_P4bS">&quot;PreUpdate&quot;</code><code class="op_lSLc"> | </code><code class="blue_P4bS">&quot;Update&quot;</code><code class="op_lSLc"> | </code><code class="blue_P4bS">&quot;PostUpdate&quot;</code><code class="op_lSLc"> | </code><code class="blue_P4bS">&quot;PreRender&quot;</code><code class="op_lSLc"> | </code><code class="blue_P4bS">&quot;Render&quot;</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The phase to run</p>
</span></span></div><div><code>deltaTime<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>Time since last frame</p>
</span></span></div></div><code>) → </code><code>(</code><code>)</code></div><div>
<p>Runs all enabled systems in a specific phase only.</p>
<pre class="language-lua"><code class="language-lua"><span class="token comment">-- Run only render systems</span>
world<span class="token punctuation">:</span><span class="token function">runPhase</span><span class="token punctuation">(</span><span class="token string">"Render"</span><span class="token punctuation">,</span> dt<span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step"><code style="text-decoration:none">step</code><a href="#step" class="hash-link" aria-label="Direct link to step" title="Direct link to step">​</a></h3><span class="docTag__6UZ" style="border-color:#79b473;color:#79b473">System</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1792"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">step</code><code>(</code><div class="inset_uKQm"><div><code>deltaTime<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>Time since last frame</p>
</span></span></div></div><code>) → </code><code>(</code><code>)</code></div><div>
<p>Performs a complete world update step:</p>
<ol>
  <li>Flushes any pending deferred commands (<a href="/AlloyECS/api/World#flush">World:flush</a>)</li>
  <li>Runs all systems (<a href="/AlloyECS/api/World#runSystems">World:runSystems</a>)</li>
  <li>Clears change tracking (<a href="/AlloyECS/api/World#clearChanges">World:clearChanges</a>)</li>
</ol>
<pre class="language-lua"><code class="language-lua">RunService<span class="token punctuation">.</span>Heartbeat<span class="token punctuation">:</span><span class="token function">Connect</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>dt<span class="token punctuation">)</span>
	world<span class="token punctuation">:</span><span class="token function">step</span><span class="token punctuation">(</span>dt<span class="token punctuation">)</span>
<span class="token keyword">end</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="relate"><code style="text-decoration:none">relate</code><a href="#relate" class="hash-link" aria-label="Direct link to relate" title="Direct link to relate">​</a></h3><span class="docTag__6UZ" style="border-color:#79b473;color:#79b473">Relationship</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1834"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">relate</code><code>(</code><div class="inset_uKQm"><div><code>source<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The source entity</p>
</span></span></div><div><code>relation<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The relation type (a component ID)</p>
</span></span></div><div><code>target<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The target entity</p>
</span></span></div><div><code>value<!-- -->: </code><code class="blue_P4bS">any?</code><span class="inlineDescription_G7Er">-- <span>
<p>Optional data to store with the relationship</p>
</span></span></div></div><code>) → </code><code>(</code><code>)</code></div><div>
<p>
  Creates a relationship between two entities.
  Relationships can optionally store data.
</p>

  
    
    
      <div class="admonition admonition-info alert alert--info">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16">
                <path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path>
              </svg></span><span class="admonition-title">Relation Types</span></h5>
        </div>
        <div class="admonition-content">
          <p>
            Use <a href="/AlloyECS/api/World#component">World:component</a> to create relation types. They work like components
            but connect two entities together.
          </p>
        </div>
      </div>
    
  

<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> ChildOf <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">local</span> Likes <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">-- Simple relationship</span>
world<span class="token punctuation">:</span><span class="token function">relate</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> ChildOf<span class="token punctuation">,</span> parent<span class="token punctuation">)</span>

<span class="token comment">-- Relationship with data</span>
world<span class="token punctuation">:</span><span class="token function">relate</span><span class="token punctuation">(</span>player<span class="token punctuation">,</span> Likes<span class="token punctuation">,</span> item<span class="token punctuation">,</span> <span class="token punctuation">{</span> amount <span class="token operator">=</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">-- Get all children</span>
<span class="token keyword">for</span> _<span class="token punctuation">,</span> child <span class="token keyword">in</span> world<span class="token punctuation">:</span><span class="token function">getSources</span><span class="token punctuation">(</span>ChildOf<span class="token punctuation">,</span> parent<span class="token punctuation">)</span> <span class="token keyword">do</span>
	<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Child:"</span><span class="token punctuation">,</span> child<span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unrelate"><code style="text-decoration:none">unrelate</code><a href="#unrelate" class="hash-link" aria-label="Direct link to unrelate" title="Direct link to unrelate">​</a></h3><span class="docTag__6UZ" style="border-color:#79b473;color:#79b473">Relationship</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1895"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">unrelate</code><code>(</code><div class="inset_uKQm"><div><code>source<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The source entity</p>
</span></span></div><div><code>relation<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The relation type</p>
</span></span></div><div><code>target<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The target entity</p>
</span></span></div></div><code>) → </code><code>(</code><code>)</code></div><div>
<p>Removes a relationship between two entities.</p>
<pre class="language-lua"><code class="language-lua">world<span class="token punctuation">:</span><span class="token function">unrelate</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> ChildOf<span class="token punctuation">,</span> parent<span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="getRelation"><code style="text-decoration:none">getRelation</code><a href="#getRelation" class="hash-link" aria-label="Direct link to getRelation" title="Direct link to getRelation">​</a></h3><span class="docTag__6UZ" style="border-color:#79b473;color:#79b473">Relationship</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1942"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">getRelation</code><code>(</code><div class="inset_uKQm"><div><code>source<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The source entity</p>
</span></span></div><div><code>relation<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The relation type</p>
</span></span></div><div><code>target<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The target entity</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS">any</code><span class="inlineDescription_G7Er">-- <span>
<p>The relationship data, or nil</p>
</span></span></div><div>
<p>Gets the data stored in a relationship, if any.</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> likeData <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">getRelation</span><span class="token punctuation">(</span>player<span class="token punctuation">,</span> Likes<span class="token punctuation">,</span> item<span class="token punctuation">)</span>
<span class="token keyword">if</span> likeData <span class="token keyword">then</span>
	<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Like amount:"</span><span class="token punctuation">,</span> likeData<span class="token punctuation">.</span>amount<span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hasRelation"><code style="text-decoration:none">hasRelation</code><a href="#hasRelation" class="hash-link" aria-label="Direct link to hasRelation" title="Direct link to hasRelation">​</a></h3><span class="docTag__6UZ" style="border-color:#79b473;color:#79b473">Relationship</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L1974"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">hasRelation</code><code>(</code><div class="inset_uKQm"><div><code>source<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The source entity</p>
</span></span></div><div><code>relation<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The relation type</p>
</span></span></div><div><code>target<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The target entity</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS">boolean</code><span class="inlineDescription_G7Er">-- <span>
<p>True if the relationship exists</p>
</span></span></div><div>
<p>Checks if a relationship exists between two entities.</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">if</span> world<span class="token punctuation">:</span><span class="token function">hasRelation</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> ChildOf<span class="token punctuation">,</span> parent<span class="token punctuation">)</span> <span class="token keyword">then</span>
	<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Is a child of parent"</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="getTargets"><code style="text-decoration:none">getTargets</code><a href="#getTargets" class="hash-link" aria-label="Direct link to getTargets" title="Direct link to getTargets">​</a></h3><span class="docTag__6UZ" style="border-color:#79b473;color:#79b473">Relationship</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L2006"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">getTargets</code><code>(</code><div class="inset_uKQm"><div><code>source<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The source entity</p>
</span></span></div><div><code>relation<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The relation type</p>
</span></span></div></div><code>) → </code><code class="purple_ieR2">{</code><code class="blue_P4bS">number</code><code class="purple_ieR2">}</code><span class="inlineDescription_G7Er">-- <span>
<p>Array of target entity IDs</p>
</span></span></div><div>
<p>Gets all target entities that the source has a relationship with.</p>
<pre class="language-lua"><code class="language-lua"><span class="token comment">-- Get all items this player likes</span>
<span class="token keyword">local</span> likedItems <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">getTargets</span><span class="token punctuation">(</span>player<span class="token punctuation">,</span> Likes<span class="token punctuation">)</span>
<span class="token keyword">for</span> _<span class="token punctuation">,</span> item <span class="token keyword">in</span> likedItems <span class="token keyword">do</span>
	<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Likes:"</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="getSources"><code style="text-decoration:none">getSources</code><a href="#getSources" class="hash-link" aria-label="Direct link to getSources" title="Direct link to getSources">​</a></h3><span class="docTag__6UZ" style="border-color:#79b473;color:#79b473">Relationship</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L2043"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">getSources</code><code>(</code><div class="inset_uKQm"><div><code>relation<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The relation type</p>
</span></span></div><div><code>target<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The target entity</p>
</span></span></div></div><code>) → </code><code class="purple_ieR2">{</code><code class="blue_P4bS">number</code><code class="purple_ieR2">}</code><span class="inlineDescription_G7Er">-- <span>
<p>Array of source entity IDs</p>
</span></span></div><div>
<p>Gets all source entities that have a relationship to the target.</p>
<pre class="language-lua"><code class="language-lua"><span class="token comment">-- Get all children of this parent</span>
<span class="token keyword">local</span> children <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">getSources</span><span class="token punctuation">(</span>ChildOf<span class="token punctuation">,</span> parent<span class="token punctuation">)</span>
<span class="token keyword">for</span> _<span class="token punctuation">,</span> child <span class="token keyword">in</span> children <span class="token keyword">do</span>
	<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Child:"</span><span class="token punctuation">,</span> child<span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prefab"><code style="text-decoration:none">prefab</code><a href="#prefab" class="hash-link" aria-label="Direct link to prefab" title="Direct link to prefab">​</a></h3><span class="docTag__6UZ" style="border-color:#70cc00;color:#70cc00">Prefab</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L2110"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">prefab</code><code>(</code><div class="inset_uKQm"><div><code>name<!-- -->: </code><code class="blue_P4bS">string?</code><span class="inlineDescription_G7Er">-- <span>
<p>Optional name to retrieve a registered prefab</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/AlloyECS/api/AlloyECS#PrefabBuilder">PrefabBuilder</a></code><code class="op_lSLc"> | </code><code class="blue_P4bS">PrefabData</code><span class="inlineDescription_G7Er">-- <span>
<p>A builder or existing prefab data</p>
</span></span></div><div>
<p>
  Creates a new prefab builder or retrieves an existing prefab by name.
  Prefabs are templates for spawning entities with predefined components.
</p>

  
    
    
      <div class="admonition admonition-info alert alert--info">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16">
                <path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path>
              </svg></span><span class="admonition-title">Builder Pattern</span></h5>
        </div>
        <div class="admonition-content">
          <p>The prefab builder uses a fluent interface:</p>
          <ul>
            <li><code>:with(componentId, value?)</code> - Add a component or tag</li>
            <li><code>:build(name?)</code> - Build the prefab, optionally registering by name</li>
          </ul>
        </div>
      </div>
    
  

<pre class="language-lua"><code class="language-lua"><span class="token comment">-- Create and register a prefab</span>
<span class="token keyword">local</span> enemyPrefab <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">prefab</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">:</span><span class="token function">with</span><span class="token punctuation">(</span>Health<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
	<span class="token punctuation">:</span><span class="token function">with</span><span class="token punctuation">(</span>Position<span class="token punctuation">,</span> Vector3<span class="token punctuation">.</span>zero<span class="token punctuation">)</span>
	<span class="token punctuation">:</span><span class="token function">with</span><span class="token punctuation">(</span>Enemy<span class="token punctuation">)</span>
	<span class="token punctuation">:</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token string">"Enemy"</span><span class="token punctuation">)</span>

<span class="token comment">-- Spawn from the prefab</span>
<span class="token keyword">local</span> enemy <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">spawn</span><span class="token punctuation">(</span><span class="token string">"Enemy"</span><span class="token punctuation">)</span>

<span class="token comment">-- Retrieve existing prefab by name</span>
<span class="token keyword">local</span> existingPrefab <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">prefab</span><span class="token punctuation">(</span><span class="token string">"Enemy"</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="spawn"><code style="text-decoration:none">spawn</code><a href="#spawn" class="hash-link" aria-label="Direct link to spawn" title="Direct link to spawn">​</a></h3><span class="docTag__6UZ" style="border-color:#70cc00;color:#70cc00">Prefab</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L2145"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">spawn</code><code>(</code><div class="inset_uKQm"><div><code>prefabOrName<!-- -->: </code><code class="blue_P4bS">PrefabData</code><code class="op_lSLc"> | </code><code class="blue_P4bS">string</code><span class="inlineDescription_G7Er">-- <span>
<p>A prefab object or registered name</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The spawned entity ID</p>
</span></span></div><div>
<p>
  Spawns a new entity from a prefab template.
  This will trigger <a href="/AlloyECS/api/World#onAdd">World:onAdd</a> hooks for all components in the prefab.
</p>
<pre class="language-lua"><code class="language-lua"><span class="token comment">-- Spawn from registered name</span>
<span class="token keyword">local</span> enemy <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">spawn</span><span class="token punctuation">(</span><span class="token string">"Enemy"</span><span class="token punctuation">)</span>

<span class="token comment">-- Spawn from prefab object</span>
<span class="token keyword">local</span> enemy2 <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">spawn</span><span class="token punctuation">(</span>enemyPrefab<span class="token punctuation">)</span>

<span class="token comment">-- Customize after spawning</span>
world<span class="token punctuation">:</span><span class="token function">set</span><span class="token punctuation">(</span>enemy<span class="token punctuation">,</span> Position<span class="token punctuation">,</span> Vector3<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="onAdd"><code style="text-decoration:none">onAdd</code><a href="#onAdd" class="hash-link" aria-label="Direct link to onAdd" title="Direct link to onAdd">​</a></h3><span class="docTag__6UZ" style="border-color:#ff5252;color:#ff5252">Event</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L2202"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">onAdd</code><code>(</code><div class="inset_uKQm"><div><code>componentId<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The component to watch</p>
</span></span></div><div><code>callback<!-- -->: </code><code class="purple_ieR2">(</code><div class="inset_uKQm"><code>entityId<!-- -->: </code><code class="blue_P4bS">number</code><code class="purple_ieR2">,</code></div><div class="inset_uKQm"><code>value<!-- -->: </code><code class="blue_P4bS">any</code></div><code class="purple_ieR2">)</code><code class="purple_ieR2"> → </code><code class="purple_ieR2">(</code><code class="purple_ieR2">)</code><span class="inlineDescription_G7Er">-- <span>
<p>Called when component is added</p>
</span></span></div></div><code>) → </code><code class="purple_ieR2">(</code><code class="purple_ieR2">)</code><code class="purple_ieR2"> → </code><code class="purple_ieR2">(</code><code class="purple_ieR2">)</code><span class="inlineDescription_G7Er">-- <span>
<p>Unsubscribe function</p>
</span></span></div><div>
<p>
  Registers a callback that fires when a component is added to any entity.
  Returns a function to unsubscribe.
</p>

  
    
    
      <div class="admonition admonition-info alert alert--info">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16">
                <path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path>
              </svg></span><span class="admonition-title">When It Fires</span></h5>
        </div>
        <div class="admonition-content">
          <p>Fires on <a href="/AlloyECS/api/World#add">World:add</a>, <a href="/AlloyECS/api/World#set">World:set</a> (for new components), and <a href="/AlloyECS/api/World#spawn">World:spawn</a>.</p>
        </div>
      </div>
    
  

<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> unsubscribe <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">onAdd</span><span class="token punctuation">(</span>Position<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>entityId<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
	<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Entity"</span><span class="token punctuation">,</span> entityId<span class="token punctuation">,</span> <span class="token string">"gained Position:"</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
<span class="token keyword">end</span><span class="token punctuation">)</span>

<span class="token comment">-- Later, to stop listening:</span>
<span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="onRemove"><code style="text-decoration:none">onRemove</code><a href="#onRemove" class="hash-link" aria-label="Direct link to onRemove" title="Direct link to onRemove">​</a></h3><span class="docTag__6UZ" style="border-color:#ff5252;color:#ff5252">Event</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L2245"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">onRemove</code><code>(</code><div class="inset_uKQm"><div><code>componentId<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The component to watch</p>
</span></span></div><div><code>callback<!-- -->: </code><code class="purple_ieR2">(</code><div class="inset_uKQm"><code>entityId<!-- -->: </code><code class="blue_P4bS">number</code><code class="purple_ieR2">,</code></div><div class="inset_uKQm"><code>value<!-- -->: </code><code class="blue_P4bS">any</code></div><code class="purple_ieR2">)</code><code class="purple_ieR2"> → </code><code class="purple_ieR2">(</code><code class="purple_ieR2">)</code><span class="inlineDescription_G7Er">-- <span>
<p>Called when component is removed</p>
</span></span></div></div><code>) → </code><code class="purple_ieR2">(</code><code class="purple_ieR2">)</code><code class="purple_ieR2"> → </code><code class="purple_ieR2">(</code><code class="purple_ieR2">)</code><span class="inlineDescription_G7Er">-- <span>
<p>Unsubscribe function</p>
</span></span></div><div>
<p>
  Registers a callback that fires when a component is removed from any entity.
  The callback receives the old value before removal.
</p>

  
    
    
      <div class="admonition admonition-info alert alert--info">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16">
                <path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path>
              </svg></span><span class="admonition-title">When It Fires</span></h5>
        </div>
        <div class="admonition-content">
          <p>Fires on <a href="/AlloyECS/api/World#remove">World:remove</a> and <a href="/AlloyECS/api/World#destroy">World:destroy</a> (for all components).</p>
        </div>
      </div>
    
  

<pre class="language-lua"><code class="language-lua">world<span class="token punctuation">:</span><span class="token function">onRemove</span><span class="token punctuation">(</span>Health<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>entityId<span class="token punctuation">,</span> oldValue<span class="token punctuation">)</span>
	<span class="token keyword">if</span> oldValue <span class="token operator">&#x3C;=</span> <span class="token number">0</span> <span class="token keyword">then</span>
		<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Entity"</span><span class="token punctuation">,</span> entityId<span class="token punctuation">,</span> <span class="token string">"died!"</span><span class="token punctuation">)</span>
	<span class="token keyword">end</span>
<span class="token keyword">end</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="onChange"><code style="text-decoration:none">onChange</code><a href="#onChange" class="hash-link" aria-label="Direct link to onChange" title="Direct link to onChange">​</a></h3><span class="docTag__6UZ" style="border-color:#ff5252;color:#ff5252">Event</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L2288"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">onChange</code><code>(</code><div class="inset_uKQm"><div><code>componentId<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The component to watch</p>
</span></span></div><div><code>callback<!-- -->: </code><code class="purple_ieR2">(</code><div class="inset_uKQm"><code>entityId<!-- -->: </code><code class="blue_P4bS">number</code><code class="purple_ieR2">,</code></div><div class="inset_uKQm"><code>oldValue<!-- -->: </code><code class="blue_P4bS">any</code><code class="purple_ieR2">,</code></div><div class="inset_uKQm"><code>newValue<!-- -->: </code><code class="blue_P4bS">any</code></div><code class="purple_ieR2">)</code><code class="purple_ieR2"> → </code><code class="purple_ieR2">(</code><code class="purple_ieR2">)</code><span class="inlineDescription_G7Er">-- <span>
<p>Called when component changes</p>
</span></span></div></div><code>) → </code><code class="purple_ieR2">(</code><code class="purple_ieR2">)</code><code class="purple_ieR2"> → </code><code class="purple_ieR2">(</code><code class="purple_ieR2">)</code><span class="inlineDescription_G7Er">-- <span>
<p>Unsubscribe function</p>
</span></span></div><div>
<p>
  Registers a callback that fires when a component value is changed.
  Only fires for components that already exist (not on initial add).
</p>

  
    
    
      <div class="admonition admonition-info alert alert--info">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16">
                <path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path>
              </svg></span><span class="admonition-title">When It Fires</span></h5>
        </div>
        <div class="admonition-content">
          <p>Fires on <a href="/AlloyECS/api/World#set">World:set</a> when updating an existing component value.</p>
        </div>
      </div>
    
  

<pre class="language-lua"><code class="language-lua">world<span class="token punctuation">:</span><span class="token function">onChange</span><span class="token punctuation">(</span>Health<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>entityId<span class="token punctuation">,</span> oldHealth<span class="token punctuation">,</span> newHealth<span class="token punctuation">)</span>
	<span class="token keyword">if</span> newHealth <span class="token operator">&#x3C;</span> oldHealth <span class="token keyword">then</span>
		<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Entity"</span><span class="token punctuation">,</span> entityId<span class="token punctuation">,</span> <span class="token string">"took"</span><span class="token punctuation">,</span> oldHealth <span class="token operator">-</span> newHealth<span class="token punctuation">,</span> <span class="token string">"damage!"</span><span class="token punctuation">)</span>
	<span class="token keyword">end</span>
<span class="token keyword">end</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="serialize"><code style="text-decoration:none">serialize</code><a href="#serialize" class="hash-link" aria-label="Direct link to serialize" title="Direct link to serialize">​</a></h3><span class="docTag__6UZ" style="border-color:#218c74;color:#218c74">Persistence</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L2333"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">serialize</code><code>(</code><div class="inset_uKQm"><div><code>typeHandlers<!-- -->: </code><code class="purple_ieR2">{</code><span><code>[</code><code class="blue_P4bS">string</code><code>]</code></span><code>: </code><code class="green_DgR4">(</code><code class="blue_P4bS">any</code><code class="green_DgR4">)</code><code class="green_DgR4"> → </code><code class="blue_P4bS">any</code><code class="purple_ieR2">}</code><code class="blue_P4bS">?</code><span class="inlineDescription_G7Er">-- <span>
<p>Optional handlers for custom types</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/AlloyECS/api/AlloyECS#SerializedWorld">SerializedWorld</a></code><span class="inlineDescription_G7Er">-- <span>
<p>The serialized world state</p>
</span></span></div><div>
<p>
  Serializes the entire world state to a table that can be saved.
  Use typeHandlers to convert non-serializable types like Vector3.
</p>

  
    
    
      <div class="admonition admonition-warning alert alert--warning">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                <path d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path>
              </svg></span><span class="admonition-title">Custom Types</span></h5>
        </div>
        <div class="admonition-content">
          <p>
            Roblox types like Vector3, CFrame, etc. must be converted using typeHandlers
            or they won't serialize properly.
          </p>
        </div>
      </div>
    
  

<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> data <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	Vector3 <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token punctuation">{</span> x <span class="token operator">=</span> v<span class="token punctuation">.</span>X<span class="token punctuation">,</span> y <span class="token operator">=</span> v<span class="token punctuation">.</span>Y<span class="token punctuation">,</span> z <span class="token operator">=</span> v<span class="token punctuation">.</span>Z <span class="token punctuation">}</span>
	<span class="token keyword">end</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">-- Save data to DataStore, file, etc.</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deserialize"><code style="text-decoration:none">deserialize</code><a href="#deserialize" class="hash-link" aria-label="Direct link to deserialize" title="Direct link to deserialize">​</a></h3><span class="docTag__6UZ" style="border-color:#218c74;color:#218c74">Persistence</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L2413"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">deserialize</code><code>(</code><div class="inset_uKQm"><div><code>data<!-- -->: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/AlloyECS/api/AlloyECS#SerializedWorld">SerializedWorld</a></code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The serialized world state</p>
</span></span></div><div><code>typeHandlers<!-- -->: </code><code class="purple_ieR2">{</code><span><code>[</code><code class="blue_P4bS">string</code><code>]</code></span><code>: </code><code class="green_DgR4">(</code><code class="blue_P4bS">any</code><code class="green_DgR4">)</code><code class="green_DgR4"> → </code><code class="blue_P4bS">any</code><code class="purple_ieR2">}</code><code class="blue_P4bS">?</code><span class="inlineDescription_G7Er">-- <span>
<p>Optional handlers to reconstruct custom types</p>
</span></span></div></div><code>) → </code><code>(</code><code>)</code></div><div>
<p>Restores world state from serialized data.</p>

  
    
    
      <div class="admonition admonition-danger alert alert--danger">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16">
                <path d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path>
              </svg></span><span class="admonition-title">Clears Existing Data</span></h5>
        </div>
        <div class="admonition-content">
          <p>
            This clears all existing entities, components, and relationships
            before loading the serialized data.
          </p>
        </div>
      </div>
    
  

<pre class="language-lua"><code class="language-lua">world<span class="token punctuation">:</span><span class="token function">deserialize</span><span class="token punctuation">(</span>savedData<span class="token punctuation">,</span> <span class="token punctuation">{</span>
	Vector3 <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>
		<span class="token keyword">if</span> v<span class="token punctuation">.</span>x <span class="token keyword">then</span>
			<span class="token keyword">return</span> Vector3<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>x<span class="token punctuation">,</span> v<span class="token punctuation">.</span>y<span class="token punctuation">,</span> v<span class="token punctuation">.</span>z<span class="token punctuation">)</span>
		<span class="token keyword">end</span>
		<span class="token keyword">return</span> <span class="token keyword">nil</span>
	<span class="token keyword">end</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="each"><code style="text-decoration:none">each</code><a href="#each" class="hash-link" aria-label="Direct link to each" title="Direct link to each">​</a></h3><span class="docTag__6UZ" style="border-color:#70cc00;color:#70cc00">Entity</span><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/LithHash/AlloyECS/blob/main/src/init.luau#L2517"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">each</code><code>(</code><div class="inset_uKQm"><div><code>callback<!-- -->: </code><code class="purple_ieR2">(</code><code>entityId<!-- -->: </code><code class="blue_P4bS">number</code><code class="purple_ieR2">)</code><code class="purple_ieR2"> → </code><code class="purple_ieR2">(</code><code class="purple_ieR2">)</code><span class="inlineDescription_G7Er">-- <span>
<p>Function to call for each entity</p>
</span></span></div></div><code>) → </code><code>(</code><code>)</code></div><div>
<p>Iterates over all living entities in the world.</p>

  
    
    
      <div class="admonition admonition-success alert alert--success">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16">
                <path d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path>
              </svg></span><span class="admonition-title">Alternative</span></h5>
        </div>
        <div class="admonition-content">
          <p>For filtering entities by component, use <a href="/AlloyECS/api/World#query">World:query</a> instead.</p>
        </div>
      </div>
    
  

<pre class="language-lua"><code class="language-lua">world<span class="token punctuation">:</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>entityId<span class="token punctuation">)</span>
	<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Entity:"</span><span class="token punctuation">,</span> entityId<span class="token punctuation">)</span>
<span class="token keyword">end</span><span class="token punctuation">)</span>
</code></pre>
</div></div></article></div><details><summary>Show raw api</summary><pre style="max-width:100%;white-space:pre-wrap">{
    &quot;functions&quot;: [
        {
            &quot;name&quot;: &quot;entity&quot;,
            &quot;desc&quot;: &quot;Creates a new entity and returns its ID.\nEntity IDs are recycled with incremented generations when entities are destroyed.\n\n:::info Entity IDs\nEntity IDs encode both an index (24 bits) and a generation (8 bits).\nUse [AlloyECS.decodeEntityIndex] and [AlloyECS.decodeEntityGeneration] to extract these values.\n:::\n\n```lua\nlocal entity = world:entity()\nworld:set(entity, Position, Vector3.zero)\n```&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;The new entity ID&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Entity&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 352,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;isAlive&quot;,
            &quot;desc&quot;: &quot;Checks if an entity is currently alive in the world.\n\n:::warning Stale Entity IDs\nAlways check `isAlive` before using a stored entity ID, as the entity may have been destroyed\nand its ID recycled.\n:::\n\n```lua\nif world:isAlive(entity) then\n\t-- Safe to use entity\n\tlocal pos = world:get(entity, Position)\nend\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;entityId&quot;,
                    &quot;desc&quot;: &quot;The entity ID to check&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;True if the entity exists and is alive&quot;,
                    &quot;lua_type&quot;: &quot;boolean&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Entity&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 402,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;destroy&quot;,
            &quot;desc&quot;: &quot;Destroys an entity, removing all its components and relationships.\nThe entity&#x27;s index will be recycled with an incremented generation.\n\nThis will trigger [World:onRemove] hooks for all components on the entity.\n\n```lua\nworld:destroy(entity)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;entityId&quot;,
                    &quot;desc&quot;: &quot;The entity ID to destroy&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Entity&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 423,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;getEntityCount&quot;,
            &quot;desc&quot;: &quot;Returns the total number of living entities in the world.\n\n```lua\nprint(\&quot;Entities:\&quot;, world:getEntityCount())\n```&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;The number of living entities&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Entity&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 490,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;getEntities&quot;,
            &quot;desc&quot;: &quot;Returns an array containing all living entity IDs.\n\n:::tip Performance\nFor iteration, consider using [World:each] or [World:query] instead,\nas they don&#x27;t create a new array.\n:::\n\n```lua\nfor _, entityId in world:getEntities() do\n\tprint(entityId)\nend\n```&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;Array of all living entity IDs&quot;,
                    &quot;lua_type&quot;: &quot;{number}&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Entity&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 513,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;component&quot;,
            &quot;desc&quot;: &quot;Creates a new component type and returns its ID.\n\n| Storage Type | Description | Use Case |\n|--------------|-------------|----------|\n| `\&quot;sparse\&quot;` | Standard component with data (default) | Most components |\n| `\&quot;dense\&quot;` | *(Coming soon)* Optimized for components on most entities | Components on 50%+ entities |\n| `\&quot;tag\&quot;` | No data, just marks entities | Flags like `Player`, `Enemy` |\n\n:::tip Tags\nFor tag components (no data), use [World:tag] as a shorthand.\n:::\n\n```lua\nlocal Position = world:component()\nlocal Health = world:component({ storage = \&quot;sparse\&quot; })\nlocal Visible = world:component({ storage = \&quot;tag\&quot; })\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;config&quot;,
                    &quot;desc&quot;: &quot;Optional configuration&quot;,
                    &quot;lua_type&quot;: &quot;{ storage: \&quot;sparse\&quot; | \&quot;dense\&quot; | \&quot;tag\&quot; }?&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;The component ID&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Component&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 546,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;tag&quot;,
            &quot;desc&quot;: &quot;Creates a new tag component (a component with no data).\nTags are useful for marking entities without storing any values.\n\nThis is equivalent to `world:component({ storage = \&quot;tag\&quot; })`.\n\n```lua\nlocal Player = world:tag()\nlocal Enemy = world:tag()\n\nworld:add(entity, Player)\n\n-- Tags work in queries but return nil for their value\nfor entityId in world:query(Player) do\n\tprint(\&quot;Found player:\&quot;, entityId)\nend\n```&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;The tag component ID&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Component&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 590,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;isTag&quot;,
            &quot;desc&quot;: &quot;Checks if a component is a tag (has no data).\n\n```lua\nif world:isTag(componentId) then\n\tworld:add(entity, componentId)\nelse\n\tworld:set(entity, componentId, defaultValue)\nend\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;componentId&quot;,
                    &quot;desc&quot;: &quot;The component ID to check&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;True if the component is a tag&quot;,
                    &quot;lua_type&quot;: &quot;boolean&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Component&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 611,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;add&quot;,
            &quot;desc&quot;: &quot;Adds a tag or component (with value `true`) to an entity.\nUse [World:set] instead if you need to store a specific value.\n\nTriggers [World:onAdd] hooks.\n\n```lua\nworld:add(entity, Player)\nworld:add(entity, Visible)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;entityId&quot;,
                    &quot;desc&quot;: &quot;The entity to add the component to&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;componentId&quot;,
                    &quot;desc&quot;: &quot;The component/tag to add&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Component&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 714,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;set&quot;,
            &quot;desc&quot;: &quot;Sets a component value on an entity. If the entity doesn&#x27;t have the component,\nit will be added.\n\n- Triggers [World:onAdd] hook if the component is new\n- Triggers [World:onChange] hook if updating an existing value\n\n```lua\nworld:set(entity, Position, Vector3.new(0, 10, 0))\nworld:set(entity, Health, 100)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;entityId&quot;,
                    &quot;desc&quot;: &quot;The entity to set the component on&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;componentId&quot;,
                    &quot;desc&quot;: &quot;The component ID&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;value&quot;,
                    &quot;desc&quot;: &quot;The value to store&quot;,
                    &quot;lua_type&quot;: &quot;any&quot;
                }
            ],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Component&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 760,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;get&quot;,
            &quot;desc&quot;: &quot;Gets a component value from an entity. Returns nil for tags or missing components.\n\n:::info Tags\nFor tags, use [World:has] to check presence since `get` returns nil.\n:::\n\n```lua\nlocal pos = world:get(entity, Position)\nif pos then\n\tprint(pos.X, pos.Y, pos.Z)\nend\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;entityId&quot;,
                    &quot;desc&quot;: &quot;The entity to get the component from&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;componentId&quot;,
                    &quot;desc&quot;: &quot;The component ID&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;The component value, or nil if not present&quot;,
                    &quot;lua_type&quot;: &quot;any&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Component&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 819,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;has&quot;,
            &quot;desc&quot;: &quot;Checks if an entity has one or more components (including tags).\n\n```lua\n-- Check single component\nif world:has(entity, Position) then\n\t-- ...\nend\n\n-- Check multiple components\nif world:has(entity, Position, Velocity) then\n\t-- Entity has both Position and Velocity\nend\n\n-- Works with tags too\nif world:has(entity, Player) then\n\t-- Entity is a player\nend\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;entityId&quot;,
                    &quot;desc&quot;: &quot;The entity to check&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;...&quot;,
                    &quot;desc&quot;: &quot;One or more component IDs&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;True if the entity has all specified components&quot;,
                    &quot;lua_type&quot;: &quot;boolean&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Component&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 860,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;remove&quot;,
            &quot;desc&quot;: &quot;Removes a component from an entity.\n\nTriggers [World:onRemove] hook with the old value.\n\n```lua\nworld:remove(entity, Velocity)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;entityId&quot;,
                    &quot;desc&quot;: &quot;The entity to remove the component from&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;componentId&quot;,
                    &quot;desc&quot;: &quot;The component ID to remove&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Component&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 898,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;query&quot;,
            &quot;desc&quot;: &quot;Queries for entities that have all specified components.\nReturns a query object that yields the entity ID followed by component values.\n\n```lua\n-- Simple query (direct iteration)\nfor entityId, position in world:query(Position) do\n\tprint(entityId, position)\nend\n\n-- Multiple components\nfor entityId, pos, vel in world:query(Position, Velocity) do\n\tworld:set(entityId, Position, pos + vel * deltaTime)\nend\n\n-- With filters (call :iter() after filters)\nfor entityId, pos in world:query(Position):with(Player):without(Dead):iter() do\n\t-- Only living players with Position\nend\n```\n\n:::tip Query Caching\nQueries are cached for performance. The cache is automatically\ninvalidated when entities or components change.\n:::\n\n:::info Filter Methods\nThe query result supports chainable filter methods:\n- `:with(...)` - Require components without returning their values\n- `:without(...)` - Exclude entities with these components\n- `:iter()` - Execute the filtered query (required when using filters)\n:::&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;...&quot;,
                    &quot;desc&quot;: &quot;Component IDs to query for&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;A query object that can be iterated directly or filtered with `:with()` / `:without()`&quot;,
                    &quot;lua_type&quot;: &quot;QueryBuilder&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Query&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1186,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;queryBuilder&quot;,
            &quot;desc&quot;: &quot;Creates a query builder for more complex queries with filters.\n\n:::tip Use query() Instead\n[World:query] now supports the same `:with()` and `:without()` modifiers.\nThis method is provided for backwards compatibility.\n:::\n\n```lua\n-- Preferred: use query() directly\nfor entityId, pos in world:query(Position):with(Player):without(Dead):iter() do\n\t-- pos is returned, Player is required but not returned\nend\n\n-- Also works: explicit queryBuilder\nfor entityId, pos in world:queryBuilder(Position):with(Player):without(Dead):iter() do\n\t-- Same result\nend\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;...&quot;,
                    &quot;desc&quot;: &quot;Component IDs to query for (values will be returned)&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;A query builder for adding filters&quot;,
                    &quot;lua_type&quot;: &quot;QueryBuilder&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Query&quot;,
                &quot;Advanced&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1224,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;added&quot;,
            &quot;desc&quot;: &quot;Returns entities that had the specified component added this frame.\n\n:::warning Requires Change Tracking\nThis method requires `trackChanges = true` in [AlloyECS.createWorld] config.\n:::\n\n```lua\nfor _, entityId in world:added(Position) do\n\tprint(\&quot;Entity gained Position:\&quot;, entityId)\nend\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;componentId&quot;,
                    &quot;desc&quot;: &quot;The component ID to check&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;Array of entity IDs that had this component added&quot;,
                    &quot;lua_type&quot;: &quot;{number}&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Reactive&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1372,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;removed&quot;,
            &quot;desc&quot;: &quot;Returns entities that had the specified component removed this frame.\n\n:::warning Requires Change Tracking\nThis method requires `trackChanges = true` in [AlloyECS.createWorld] config.\n:::\n\n```lua\nfor _, entityId in world:removed(Health) do\n\tprint(\&quot;Entity lost Health:\&quot;, entityId)\nend\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;componentId&quot;,
                    &quot;desc&quot;: &quot;The component ID to check&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;Array of entity IDs that had this component removed&quot;,
                    &quot;lua_type&quot;: &quot;{number}&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Reactive&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1399,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;changed&quot;,
            &quot;desc&quot;: &quot;Returns entities that had the specified component value changed this frame.\n\n:::warning Requires Change Tracking\nThis method requires `trackChanges = true` in [AlloyECS.createWorld] config.\n:::\n\n```lua\nfor _, entityId in world:changed(Position) do\n\tprint(\&quot;Entity moved:\&quot;, entityId)\nend\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;componentId&quot;,
                    &quot;desc&quot;: &quot;The component ID to check&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;Array of entity IDs that had this component changed&quot;,
                    &quot;lua_type&quot;: &quot;{number}&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Reactive&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1426,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;clearChanges&quot;,
            &quot;desc&quot;: &quot;Clears all tracked changes for the current frame.\nCall this at the end of each frame after processing changes.\n\n:::tip Automatic Clearing\n[World:step] calls this automatically. Only call manually if you&#x27;re\nnot using `step()`.\n:::\n\n```lua\n-- Process changes\nfor _, entityId in world:added(Position) do\n\t-- Handle new positions\nend\n\n-- Clear for next frame\nworld:clearChanges()\n```&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Reactive&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1457,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;defer&quot;,
            &quot;desc&quot;: &quot;Enables deferred mode. In deferred mode, use the `defer*` methods\nto queue operations that will be executed when [World:flush] is called.\n\n:::info Use Case\nDeferred operations are useful during iteration when you can&#x27;t safely\nmodify entities being queried.\n:::&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Deferred&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1478,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;deferSpawn&quot;,
            &quot;desc&quot;: &quot;Queues an entity spawn operation. The callback receives the entity ID when flushed.\n\n```lua\nworld:deferSpawn(function(entityId)\n\tworld:deferSet(entityId, Position, Vector3.zero)\nend)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;callback&quot;,
                    &quot;desc&quot;: &quot;Optional callback with the new entity ID&quot;,
                    &quot;lua_type&quot;: &quot;((entityId: number) -&gt; ())?&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;Returns self for chaining&quot;,
                    &quot;lua_type&quot;: &quot;World&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Deferred&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1497,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;deferDestroy&quot;,
            &quot;desc&quot;: &quot;Queues an entity destroy operation.\n\n```lua\nfor entityId, health in world:query(Health) do\n\tif health &lt;= 0 then\n\t\tworld:deferDestroy(entityId)\n\tend\nend\nworld:flush()\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;entityId&quot;,
                    &quot;desc&quot;: &quot;The entity to destroy&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;Returns self for chaining&quot;,
                    &quot;lua_type&quot;: &quot;World&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Deferred&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1520,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;deferAdd&quot;,
            &quot;desc&quot;: &quot;Queues a component add operation.\n\n```lua\nworld:deferAdd(entity, Player)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;entityId&quot;,
                    &quot;desc&quot;: &quot;The entity to add the component to&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;componentId&quot;,
                    &quot;desc&quot;: &quot;The component to add&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;Returns self for chaining&quot;,
                    &quot;lua_type&quot;: &quot;World&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Deferred&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1539,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;deferSet&quot;,
            &quot;desc&quot;: &quot;Queues a component set operation.\n\n```lua\nworld:deferSet(entity, Position, newPosition)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;entityId&quot;,
                    &quot;desc&quot;: &quot;The entity to set the component on&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;componentId&quot;,
                    &quot;desc&quot;: &quot;The component ID&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;value&quot;,
                    &quot;desc&quot;: &quot;The value to set&quot;,
                    &quot;lua_type&quot;: &quot;any&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;Returns self for chaining&quot;,
                    &quot;lua_type&quot;: &quot;World&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Deferred&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1559,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;deferRemove&quot;,
            &quot;desc&quot;: &quot;Queues a component remove operation.\n\n```lua\nworld:deferRemove(entity, Velocity)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;entityId&quot;,
                    &quot;desc&quot;: &quot;The entity to remove the component from&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;componentId&quot;,
                    &quot;desc&quot;: &quot;The component to remove&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;Returns self for chaining&quot;,
                    &quot;lua_type&quot;: &quot;World&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Deferred&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1578,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;flush&quot;,
            &quot;desc&quot;: &quot;Executes all queued deferred operations and exits deferred mode.\n\n:::tip Automatic Flushing\n[World:step] calls flush automatically. Only call manually if you&#x27;re\nnot using `step()`.\n:::\n\n```lua\nworld:defer()\nworld:deferSpawn()\nworld:deferSet(entity, Position, pos)\nworld:flush() -- All operations execute here\n```&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Deferred&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1602,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;hasPendingCommands&quot;,
            &quot;desc&quot;: &quot;Checks if there are any pending deferred commands to execute.\n\n```lua\nif world:hasPendingCommands() then\n\tworld:flush()\nend\n```&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;True if there are pending deferred commands&quot;,
                    &quot;lua_type&quot;: &quot;boolean&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Deferred&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1638,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;addSystem&quot;,
            &quot;desc&quot;: &quot;Adds a system to the scheduler. Systems are batched by phase and can run\nin parallel if they don&#x27;t have conflicting dependencies.\n\n| Phase | Description |\n|-------|-------------|\n| `\&quot;PreUpdate\&quot;` | Before main update logic |\n| `\&quot;Update\&quot;` | Main game logic |\n| `\&quot;PostUpdate\&quot;` | After main update logic |\n| `\&quot;PreRender\&quot;` | Before rendering |\n| `\&quot;Render\&quot;` | Rendering logic |\n\n```lua\nworld:addSystem(\&quot;Movement\&quot;, \&quot;Update\&quot;, {\n\treads = { Position, Velocity },\n\twrites = { Position }\n}, function(dt)\n\tfor entityId, pos, vel in world:query(Position, Velocity) do\n\t\tworld:set(entityId, Position, pos + vel * dt)\n\tend\nend)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;name&quot;,
                    &quot;desc&quot;: &quot;Unique name for the system&quot;,
                    &quot;lua_type&quot;: &quot;string&quot;
                },
                {
                    &quot;name&quot;: &quot;phase&quot;,
                    &quot;desc&quot;: &quot;Execution phase&quot;,
                    &quot;lua_type&quot;: &quot;\&quot;PreUpdate\&quot; | \&quot;Update\&quot; | \&quot;PostUpdate\&quot; | \&quot;PreRender\&quot; | \&quot;Render\&quot;&quot;
                },
                {
                    &quot;name&quot;: &quot;dependencies&quot;,
                    &quot;desc&quot;: &quot;Component dependencies&quot;,
                    &quot;lua_type&quot;: &quot;{ reads: {number}?, writes: {number}? }&quot;
                },
                {
                    &quot;name&quot;: &quot;callback&quot;,
                    &quot;desc&quot;: &quot;System function&quot;,
                    &quot;lua_type&quot;: &quot;(deltaTime: number) -&gt; ()&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;The created system&quot;,
                    &quot;lua_type&quot;: &quot;System&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;System&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1674,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;removeSystem&quot;,
            &quot;desc&quot;: &quot;Removes a system from the scheduler.\n\n```lua\nworld:removeSystem(\&quot;Movement\&quot;)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;name&quot;,
                    &quot;desc&quot;: &quot;The name of the system to remove&quot;,
                    &quot;lua_type&quot;: &quot;string&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;True if the system was found and removed&quot;,
                    &quot;lua_type&quot;: &quot;boolean&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;System&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1697,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;enableSystem&quot;,
            &quot;desc&quot;: &quot;Enables a previously disabled system.\n\n```lua\nworld:enableSystem(\&quot;AI\&quot;)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;name&quot;,
                    &quot;desc&quot;: &quot;The name of the system to enable&quot;,
                    &quot;lua_type&quot;: &quot;string&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;True if the system was found and enabled&quot;,
                    &quot;lua_type&quot;: &quot;boolean&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;System&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1714,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;disableSystem&quot;,
            &quot;desc&quot;: &quot;Disables a system without removing it. Disabled systems won&#x27;t run.\n\n:::tip Use Case\nUseful for pausing specific systems, e.g., disabling AI during cutscenes.\n:::\n\n```lua\nworld:disableSystem(\&quot;AI\&quot;)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;name&quot;,
                    &quot;desc&quot;: &quot;The name of the system to disable&quot;,
                    &quot;lua_type&quot;: &quot;string&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;True if the system was found and disabled&quot;,
                    &quot;lua_type&quot;: &quot;boolean&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;System&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1735,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;runSystems&quot;,
            &quot;desc&quot;: &quot;Runs all enabled systems in all phases.\n\n:::tip Use step() Instead\n[World:step] handles flushing, running systems, and clearing changes.\nUse this only if you need manual control.\n:::&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;deltaTime&quot;,
                    &quot;desc&quot;: &quot;Time since last frame&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;System&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1752,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;runPhase&quot;,
            &quot;desc&quot;: &quot;Runs all enabled systems in a specific phase only.\n\n```lua\n-- Run only render systems\nworld:runPhase(\&quot;Render\&quot;, dt)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;phase&quot;,
                    &quot;desc&quot;: &quot;The phase to run&quot;,
                    &quot;lua_type&quot;: &quot;\&quot;PreUpdate\&quot; | \&quot;Update\&quot; | \&quot;PostUpdate\&quot; | \&quot;PreRender\&quot; | \&quot;Render\&quot;&quot;
                },
                {
                    &quot;name&quot;: &quot;deltaTime&quot;,
                    &quot;desc&quot;: &quot;Time since last frame&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;System&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1770,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;step&quot;,
            &quot;desc&quot;: &quot;Performs a complete world update step:\n\n1. Flushes any pending deferred commands ([World:flush])\n2. Runs all systems ([World:runSystems])\n3. Clears change tracking ([World:clearChanges])\n\n```lua\nRunService.Heartbeat:Connect(function(dt)\n\tworld:step(dt)\nend)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;deltaTime&quot;,
                    &quot;desc&quot;: &quot;Time since last frame&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;System&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1792,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;relate&quot;,
            &quot;desc&quot;: &quot;Creates a relationship between two entities.\nRelationships can optionally store data.\n\n:::info Relation Types\nUse [World:component] to create relation types. They work like components\nbut connect two entities together.\n:::\n\n```lua\nlocal ChildOf = world:component()\nlocal Likes = world:component()\n\n-- Simple relationship\nworld:relate(child, ChildOf, parent)\n\n-- Relationship with data\nworld:relate(player, Likes, item, { amount = 10 })\n\n-- Get all children\nfor _, child in world:getSources(ChildOf, parent) do\n\tprint(\&quot;Child:\&quot;, child)\nend\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;source&quot;,
                    &quot;desc&quot;: &quot;The source entity&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;relation&quot;,
                    &quot;desc&quot;: &quot;The relation type (a component ID)&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;target&quot;,
                    &quot;desc&quot;: &quot;The target entity&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;value&quot;,
                    &quot;desc&quot;: &quot;Optional data to store with the relationship&quot;,
                    &quot;lua_type&quot;: &quot;any?&quot;
                }
            ],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Relationship&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1834,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;unrelate&quot;,
            &quot;desc&quot;: &quot;Removes a relationship between two entities.\n\n```lua\nworld:unrelate(child, ChildOf, parent)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;source&quot;,
                    &quot;desc&quot;: &quot;The source entity&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;relation&quot;,
                    &quot;desc&quot;: &quot;The relation type&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;target&quot;,
                    &quot;desc&quot;: &quot;The target entity&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Relationship&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1895,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;getRelation&quot;,
            &quot;desc&quot;: &quot;Gets the data stored in a relationship, if any.\n\n```lua\nlocal likeData = world:getRelation(player, Likes, item)\nif likeData then\n\tprint(\&quot;Like amount:\&quot;, likeData.amount)\nend\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;source&quot;,
                    &quot;desc&quot;: &quot;The source entity&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;relation&quot;,
                    &quot;desc&quot;: &quot;The relation type&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;target&quot;,
                    &quot;desc&quot;: &quot;The target entity&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;The relationship data, or nil&quot;,
                    &quot;lua_type&quot;: &quot;any&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Relationship&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1942,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;hasRelation&quot;,
            &quot;desc&quot;: &quot;Checks if a relationship exists between two entities.\n\n```lua\nif world:hasRelation(child, ChildOf, parent) then\n\tprint(\&quot;Is a child of parent\&quot;)\nend\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;source&quot;,
                    &quot;desc&quot;: &quot;The source entity&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;relation&quot;,
                    &quot;desc&quot;: &quot;The relation type&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;target&quot;,
                    &quot;desc&quot;: &quot;The target entity&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;True if the relationship exists&quot;,
                    &quot;lua_type&quot;: &quot;boolean&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Relationship&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 1974,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;getTargets&quot;,
            &quot;desc&quot;: &quot;Gets all target entities that the source has a relationship with.\n\n```lua\n-- Get all items this player likes\nlocal likedItems = world:getTargets(player, Likes)\nfor _, item in likedItems do\n\tprint(\&quot;Likes:\&quot;, item)\nend\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;source&quot;,
                    &quot;desc&quot;: &quot;The source entity&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;relation&quot;,
                    &quot;desc&quot;: &quot;The relation type&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;Array of target entity IDs&quot;,
                    &quot;lua_type&quot;: &quot;{number}&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Relationship&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 2006,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;getSources&quot;,
            &quot;desc&quot;: &quot;Gets all source entities that have a relationship to the target.\n\n```lua\n-- Get all children of this parent\nlocal children = world:getSources(ChildOf, parent)\nfor _, child in children do\n\tprint(\&quot;Child:\&quot;, child)\nend\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;relation&quot;,
                    &quot;desc&quot;: &quot;The relation type&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;target&quot;,
                    &quot;desc&quot;: &quot;The target entity&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;Array of source entity IDs&quot;,
                    &quot;lua_type&quot;: &quot;{number}&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Relationship&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 2043,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;prefab&quot;,
            &quot;desc&quot;: &quot;Creates a new prefab builder or retrieves an existing prefab by name.\nPrefabs are templates for spawning entities with predefined components.\n\n:::info Builder Pattern\nThe prefab builder uses a fluent interface:\n- `:with(componentId, value?)` - Add a component or tag\n- `:build(name?)` - Build the prefab, optionally registering by name\n:::\n\n```lua\n-- Create and register a prefab\nlocal enemyPrefab = world:prefab()\n\t:with(Health, 100)\n\t:with(Position, Vector3.zero)\n\t:with(Enemy)\n\t:build(\&quot;Enemy\&quot;)\n\n-- Spawn from the prefab\nlocal enemy = world:spawn(\&quot;Enemy\&quot;)\n\n-- Retrieve existing prefab by name\nlocal existingPrefab = world:prefab(\&quot;Enemy\&quot;)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;name&quot;,
                    &quot;desc&quot;: &quot;Optional name to retrieve a registered prefab&quot;,
                    &quot;lua_type&quot;: &quot;string?&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;A builder or existing prefab data&quot;,
                    &quot;lua_type&quot;: &quot;PrefabBuilder | PrefabData&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Prefab&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 2110,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;spawn&quot;,
            &quot;desc&quot;: &quot;Spawns a new entity from a prefab template.\nThis will trigger [World:onAdd] hooks for all components in the prefab.\n\n```lua\n-- Spawn from registered name\nlocal enemy = world:spawn(\&quot;Enemy\&quot;)\n\n-- Spawn from prefab object\nlocal enemy2 = world:spawn(enemyPrefab)\n\n-- Customize after spawning\nworld:set(enemy, Position, Vector3.new(10, 0, 0))\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;prefabOrName&quot;,
                    &quot;desc&quot;: &quot;A prefab object or registered name&quot;,
                    &quot;lua_type&quot;: &quot;PrefabData | string&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;The spawned entity ID&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Prefab&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 2145,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;onAdd&quot;,
            &quot;desc&quot;: &quot;Registers a callback that fires when a component is added to any entity.\nReturns a function to unsubscribe.\n\n:::info When It Fires\nFires on [World:add], [World:set] (for new components), and [World:spawn].\n:::\n\n```lua\nlocal unsubscribe = world:onAdd(Position, function(entityId, value)\n\tprint(\&quot;Entity\&quot;, entityId, \&quot;gained Position:\&quot;, value)\nend)\n\n-- Later, to stop listening:\nunsubscribe()\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;componentId&quot;,
                    &quot;desc&quot;: &quot;The component to watch&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;callback&quot;,
                    &quot;desc&quot;: &quot;Called when component is added&quot;,
                    &quot;lua_type&quot;: &quot;(entityId: number, value: any) -&gt; ()&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;Unsubscribe function&quot;,
                    &quot;lua_type&quot;: &quot;() -&gt; ()&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Event&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 2202,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;onRemove&quot;,
            &quot;desc&quot;: &quot;Registers a callback that fires when a component is removed from any entity.\nThe callback receives the old value before removal.\n\n:::info When It Fires\nFires on [World:remove] and [World:destroy] (for all components).\n:::\n\n```lua\nworld:onRemove(Health, function(entityId, oldValue)\n\tif oldValue &lt;= 0 then\n\t\tprint(\&quot;Entity\&quot;, entityId, \&quot;died!\&quot;)\n\tend\nend)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;componentId&quot;,
                    &quot;desc&quot;: &quot;The component to watch&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;callback&quot;,
                    &quot;desc&quot;: &quot;Called when component is removed&quot;,
                    &quot;lua_type&quot;: &quot;(entityId: number, value: any) -&gt; ()&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;Unsubscribe function&quot;,
                    &quot;lua_type&quot;: &quot;() -&gt; ()&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Event&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 2245,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;onChange&quot;,
            &quot;desc&quot;: &quot;Registers a callback that fires when a component value is changed.\nOnly fires for components that already exist (not on initial add).\n\n:::info When It Fires\nFires on [World:set] when updating an existing component value.\n:::\n\n```lua\nworld:onChange(Health, function(entityId, oldHealth, newHealth)\n\tif newHealth &lt; oldHealth then\n\t\tprint(\&quot;Entity\&quot;, entityId, \&quot;took\&quot;, oldHealth - newHealth, \&quot;damage!\&quot;)\n\tend\nend)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;componentId&quot;,
                    &quot;desc&quot;: &quot;The component to watch&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;callback&quot;,
                    &quot;desc&quot;: &quot;Called when component changes&quot;,
                    &quot;lua_type&quot;: &quot;(entityId: number, oldValue: any, newValue: any) -&gt; ()&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;Unsubscribe function&quot;,
                    &quot;lua_type&quot;: &quot;() -&gt; ()&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Event&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 2288,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;serialize&quot;,
            &quot;desc&quot;: &quot;Serializes the entire world state to a table that can be saved.\nUse typeHandlers to convert non-serializable types like Vector3.\n\n:::warning Custom Types\nRoblox types like Vector3, CFrame, etc. must be converted using typeHandlers\nor they won&#x27;t serialize properly.\n:::\n\n```lua\nlocal data = world:serialize({\n\tVector3 = function(v)\n\t\treturn { x = v.X, y = v.Y, z = v.Z }\n\tend,\n})\n\n-- Save data to DataStore, file, etc.\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;typeHandlers&quot;,
                    &quot;desc&quot;: &quot;Optional handlers for custom types&quot;,
                    &quot;lua_type&quot;: &quot;{ [string]: (any) -&gt; any }?&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;The serialized world state&quot;,
                    &quot;lua_type&quot;: &quot;SerializedWorld&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Persistence&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 2333,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;deserialize&quot;,
            &quot;desc&quot;: &quot;Restores world state from serialized data.\n\n:::danger Clears Existing Data\nThis clears all existing entities, components, and relationships\nbefore loading the serialized data.\n:::\n\n```lua\nworld:deserialize(savedData, {\n\tVector3 = function(v)\n\t\tif v.x then\n\t\t\treturn Vector3.new(v.x, v.y, v.z)\n\t\tend\n\t\treturn nil\n\tend,\n})\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;data&quot;,
                    &quot;desc&quot;: &quot;The serialized world state&quot;,
                    &quot;lua_type&quot;: &quot;SerializedWorld&quot;
                },
                {
                    &quot;name&quot;: &quot;typeHandlers&quot;,
                    &quot;desc&quot;: &quot;Optional handlers to reconstruct custom types&quot;,
                    &quot;lua_type&quot;: &quot;{ [string]: (any) -&gt; any }?&quot;
                }
            ],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Persistence&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 2413,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;each&quot;,
            &quot;desc&quot;: &quot;Iterates over all living entities in the world.\n\n:::tip Alternative\nFor filtering entities by component, use [World:query] instead.\n:::\n\n```lua\nworld:each(function(entityId)\n\tprint(\&quot;Entity:\&quot;, entityId)\nend)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;callback&quot;,
                    &quot;desc&quot;: &quot;Function to call for each entity&quot;,
                    &quot;lua_type&quot;: &quot;(entityId: number) -&gt; ()&quot;
                }
            ],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;tags&quot;: [
                &quot;Entity&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 2517,
                &quot;path&quot;: &quot;src/init.luau&quot;
            }
        }
    ],
    &quot;properties&quot;: [],
    &quot;types&quot;: [],
    &quot;name&quot;: &quot;World&quot;,
    &quot;desc&quot;: &quot;The World is the main container for all ECS data. It manages entities,\ncomponents, queries, systems, relationships, and more.\n\nCreate a new world using [AlloyECS.createWorld].\n\n## Method Categories\n\n| Category | Methods |\n|----------|----------|\n| **Entity** | [World:entity], [World:isAlive], [World:destroy], [World:getEntityCount], [World:getEntities], [World:each] |\n| **Component** | [World:component], [World:tag], [World:isTag], [World:add], [World:set], [World:get], [World:has], [World:remove] |\n| **Query** | [World:query] |\n| **System** | [World:addSystem], [World:removeSystem], [World:enableSystem], [World:disableSystem], [World:runSystems], [World:runPhase], [World:step] |\n| **Relationship** | [World:relate], [World:unrelate], [World:getRelation], [World:hasRelation], [World:getTargets], [World:getSources] |\n| **Prefab** | [World:prefab], [World:spawn] |\n| **Event** | [World:onAdd], [World:onRemove], [World:onChange] |\n| **Deferred** | [World:defer], [World:deferSpawn], [World:deferDestroy], [World:deferAdd], [World:deferSet], [World:deferRemove], [World:flush], [World:hasPendingCommands] |\n| **Reactive** | [World:added], [World:removed], [World:changed], [World:clearChanges] |\n| **Persistence** | [World:serialize], [World:deserialize] |\n\n## Example\n\n```lua\nlocal AlloyECS = require(path.to.AlloyECS)\nlocal world = AlloyECS.createWorld()\n\n-- Create components\nlocal Position = world:component()\nlocal Velocity = world:component()\n\n-- Create entities\nlocal entity = world:entity()\nworld:set(entity, Position, Vector3.new(0, 0, 0))\nworld:set(entity, Velocity, Vector3.new(1, 0, 0))\n\n-- Query and update\nfor entityId, pos, vel in world:query(Position, Velocity) do\n\tworld:set(entityId, Position, pos + vel)\nend\n```&quot;,
    &quot;source&quot;: {
        &quot;line&quot;: 171,
        &quot;path&quot;: &quot;src/init.luau&quot;
    }
}</pre></details></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#functions" class="table-of-contents__link toc-highlight">Functions</a><ul><li><a href="#add" class="table-of-contents__link toc-highlight">:add</a></li><li><a href="#added" class="table-of-contents__link toc-highlight">:added</a></li><li><a href="#addSystem" class="table-of-contents__link toc-highlight">:addSystem</a></li><li><a href="#changed" class="table-of-contents__link toc-highlight">:changed</a></li><li><a href="#clearChanges" class="table-of-contents__link toc-highlight">:clearChanges</a></li><li><a href="#component" class="table-of-contents__link toc-highlight">:component</a></li><li><a href="#defer" class="table-of-contents__link toc-highlight">:defer</a></li><li><a href="#deferAdd" class="table-of-contents__link toc-highlight">:deferAdd</a></li><li><a href="#deferDestroy" class="table-of-contents__link toc-highlight">:deferDestroy</a></li><li><a href="#deferRemove" class="table-of-contents__link toc-highlight">:deferRemove</a></li><li><a href="#deferSet" class="table-of-contents__link toc-highlight">:deferSet</a></li><li><a href="#deferSpawn" class="table-of-contents__link toc-highlight">:deferSpawn</a></li><li><a href="#deserialize" class="table-of-contents__link toc-highlight">:deserialize</a></li><li><a href="#destroy" class="table-of-contents__link toc-highlight">:destroy</a></li><li><a href="#disableSystem" class="table-of-contents__link toc-highlight">:disableSystem</a></li><li><a href="#each" class="table-of-contents__link toc-highlight">:each</a></li><li><a href="#enableSystem" class="table-of-contents__link toc-highlight">:enableSystem</a></li><li><a href="#entity" class="table-of-contents__link toc-highlight">:entity</a></li><li><a href="#flush" class="table-of-contents__link toc-highlight">:flush</a></li><li><a href="#get" class="table-of-contents__link toc-highlight">:get</a></li><li><a href="#getEntities" class="table-of-contents__link toc-highlight">:getEntities</a></li><li><a href="#getEntityCount" class="table-of-contents__link toc-highlight">:getEntityCount</a></li><li><a href="#getRelation" class="table-of-contents__link toc-highlight">:getRelation</a></li><li><a href="#getSources" class="table-of-contents__link toc-highlight">:getSources</a></li><li><a href="#getTargets" class="table-of-contents__link toc-highlight">:getTargets</a></li><li><a href="#has" class="table-of-contents__link toc-highlight">:has</a></li><li><a href="#hasPendingCommands" class="table-of-contents__link toc-highlight">:hasPendingCommands</a></li><li><a href="#hasRelation" class="table-of-contents__link toc-highlight">:hasRelation</a></li><li><a href="#isAlive" class="table-of-contents__link toc-highlight">:isAlive</a></li><li><a href="#isTag" class="table-of-contents__link toc-highlight">:isTag</a></li><li><a href="#onAdd" class="table-of-contents__link toc-highlight">:onAdd</a></li><li><a href="#onChange" class="table-of-contents__link toc-highlight">:onChange</a></li><li><a href="#onRemove" class="table-of-contents__link toc-highlight">:onRemove</a></li><li><a href="#prefab" class="table-of-contents__link toc-highlight">:prefab</a></li><li><a href="#query" class="table-of-contents__link toc-highlight">:query</a></li><li><a href="#queryBuilder" class="table-of-contents__link toc-highlight">:queryBuilder</a></li><li><a href="#relate" class="table-of-contents__link toc-highlight">:relate</a></li><li><a href="#remove" class="table-of-contents__link toc-highlight">:remove</a></li><li><a href="#removed" class="table-of-contents__link toc-highlight">:removed</a></li><li><a href="#removeSystem" class="table-of-contents__link toc-highlight">:removeSystem</a></li><li><a href="#runPhase" class="table-of-contents__link toc-highlight">:runPhase</a></li><li><a href="#runSystems" class="table-of-contents__link toc-highlight">:runSystems</a></li><li><a href="#serialize" class="table-of-contents__link toc-highlight">:serialize</a></li><li><a href="#set" class="table-of-contents__link toc-highlight">:set</a></li><li><a href="#spawn" class="table-of-contents__link toc-highlight">:spawn</a></li><li><a href="#step" class="table-of-contents__link toc-highlight">:step</a></li><li><a href="#tag" class="table-of-contents__link toc-highlight">:tag</a></li><li><a href="#unrelate" class="table-of-contents__link toc-highlight">:unrelate</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/AlloyECS/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/AlloyECS/api/AlloyECS">API Reference</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/LithHash/AlloyECS" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 LithHash. Built with Moonwave and Docusaurus.</div></div></div></footer></div>
</body>
</html>