"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[326],{7239:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"guides/components","title":"Components","description":"Components are pure data containers that you attach to entities. This guide covers everything you need to know about components in AlloyECS.","source":"@site/docs/guides/components.md","sourceDirName":"guides","slug":"/guides/components","permalink":"/AlloyECS/docs/guides/components","draft":false,"unlisted":false,"editUrl":"https://github.com/LithHash/AlloyECS/edit/main/docs/guides/components.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"defaultSidebar","previous":{"title":"Getting Started","permalink":"/AlloyECS/docs/getting-started"},"next":{"title":"Queries","permalink":"/AlloyECS/docs/guides/queries"}}');var s=o(4848),r=o(8453);const l={sidebar_position:1},i="Components",a={},d=[{value:"Creating Components",id:"creating-components",level:2},{value:"Storage Types",id:"storage-types",level:2},{value:"Tags",id:"tags",level:2},{value:"Setting Component Data",id:"setting-component-data",level:2},{value:"Getting Component Data",id:"getting-component-data",level:2},{value:"Checking Components",id:"checking-components",level:2},{value:"Removing Components",id:"removing-components",level:2},{value:"Component Hooks",id:"component-hooks",level:2},{value:"Unsubscribing",id:"unsubscribing",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Keep Components Small",id:"1-keep-components-small",level:3},{value:"2. Use Tags for Flags",id:"2-use-tags-for-flags",level:3},{value:"3. Define Components Once",id:"3-define-components-once",level:3}];function c(e){const n={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"components",children:"Components"})}),"\n",(0,s.jsx)(n.p,{children:"Components are pure data containers that you attach to entities. This guide covers everything you need to know about components in AlloyECS."}),"\n",(0,s.jsx)(n.h2,{id:"creating-components",children:"Creating Components"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"local Position = world:component()\r\nlocal Velocity = world:component()\r\nlocal Health = world:component()\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Each call to ",(0,s.jsx)(n.code,{children:"component()"})," returns a unique component ID (a number)."]}),"\n",(0,s.jsx)(n.h2,{id:"storage-types",children:"Storage Types"}),"\n",(0,s.jsx)(n.p,{children:"AlloyECS supports different storage types optimized for different use cases:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Best For"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"sparse"})}),(0,s.jsx)(n.td,{children:"Default, hash-map based"}),(0,s.jsx)(n.td,{children:"Most components"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dense"})}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.em,{children:"(Coming soon)"})," Array-based"]}),(0,s.jsx)(n.td,{children:"Components on 50%+ of entities"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"tag"})}),(0,s.jsx)(n.td,{children:"No data storage"}),(0,s.jsx)(n.td,{children:"Boolean flags"})]})]})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'-- Sparse (default)\r\nlocal Position = world:component()\r\nlocal Position = world:component({ storage = "sparse" })\r\n\r\n-- Tag - no data, just presence\r\nlocal Visible = world:component({ storage = "tag" })\n'})}),"\n",(0,s.jsx)(n.admonition,{title:"Dense Storage",type:"note",children:(0,s.jsxs)(n.p,{children:["Dense storage is planned for a future release. For now, use ",(0,s.jsx)(n.code,{children:"sparse"})," (the default)."]})}),"\n",(0,s.jsx)(n.h2,{id:"tags",children:"Tags"}),"\n",(0,s.jsx)(n.p,{children:"Tags are components without data. Use them to mark or categorize entities:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'-- Create a tag (shorthand for storage = "tag")\r\nlocal Player = world:tag()\r\nlocal Enemy = world:tag()\r\nlocal Dead = world:tag()\r\n\r\n-- Add to entity\r\nworld:add(entity, Player)\r\n\r\n-- Check presence\r\nif world:has(entity, Player) then\r\n    -- This is a player\r\nend\r\n\r\n-- Tags return nil from get()\r\nlocal value = world:get(entity, Player) -- nil\r\n\r\n-- Use has() instead\r\nlocal isPlayer = world:has(entity, Player) -- true/false\n'})}),"\n",(0,s.jsx)(n.h2,{id:"setting-component-data",children:"Setting Component Data"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"-- Set a component value\r\nworld:set(entity, Position, Vector3.new(0, 10, 0))\r\nworld:set(entity, Health, 100)\r\n\r\n-- Setting adds the component if not present\r\n-- Setting updates the value if already present\n"})}),"\n",(0,s.jsx)(n.h2,{id:"getting-component-data",children:"Getting Component Data"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'local pos = world:get(entity, Position)\r\n\r\nif pos then\r\n    print("Position:", pos.X, pos.Y, pos.Z)\r\nend\n'})}),"\n",(0,s.jsx)(n.h2,{id:"checking-components",children:"Checking Components"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"-- Check single component\r\nif world:has(entity, Position) then\r\n    -- Entity has Position\r\nend\r\n\r\n-- Check multiple components\r\nif world:has(entity, Position, Velocity) then\r\n    -- Entity has both Position AND Velocity\r\nend\n"})}),"\n",(0,s.jsx)(n.h2,{id:"removing-components",children:"Removing Components"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"world:remove(entity, Velocity)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"component-hooks",children:"Component Hooks"}),"\n",(0,s.jsx)(n.p,{children:"React to component changes with hooks:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'-- When component is added\r\nworld:onAdd(Position, function(entityId, value)\r\n    print("Entity", entityId, "gained Position:", value)\r\nend)\r\n\r\n-- When component is removed\r\nworld:onRemove(Health, function(entityId, oldValue)\r\n    if oldValue <= 0 then\r\n        print("Entity", entityId, "died!")\r\n    end\r\nend)\r\n\r\n-- When component value changes\r\nworld:onChange(Position, function(entityId, oldPos, newPos)\r\n    print("Entity", entityId, "moved from", oldPos, "to", newPos)\r\nend)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"unsubscribing",children:"Unsubscribing"}),"\n",(0,s.jsx)(n.p,{children:"Hooks return an unsubscribe function:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"local unsubscribe = world:onAdd(Position, function(entityId, value)\r\n    -- ...\r\nend)\r\n\r\n-- Later, stop listening\r\nunsubscribe()\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"1-keep-components-small",children:"1. Keep Components Small"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"-- \u2705 Good - small, focused components\r\nlocal Position = world:component()  -- Vector3\r\nlocal Velocity = world:component()  -- Vector3\r\nlocal Health = world:component()    -- number\r\n\r\n-- \u274c Avoid - large monolithic components\r\nlocal PlayerData = world:component() -- { pos, vel, health, mana, inventory, ... }\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-use-tags-for-flags",children:"2. Use Tags for Flags"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"-- \u2705 Good - tags for boolean state\r\nlocal Dead = world:tag()\r\nlocal Stunned = world:tag()\r\n\r\n-- \u274c Avoid - components with boolean values\r\nlocal IsDead = world:component()\r\nworld:set(entity, IsDead, true)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-define-components-once",children:"3. Define Components Once"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"-- \u2705 Good - define at module level\r\nlocal Position = world:component()\r\nlocal Velocity = world:component()\r\n\r\n-- \u274c Avoid - creating in loops or functions\r\nfor i = 1, 100 do\r\n    local Position = world:component() -- Creates 100 different components!\r\nend\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>l,x:()=>i});var t=o(6540);const s={},r=t.createContext(s);function l(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);